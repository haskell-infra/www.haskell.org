%!PS-Adobe-2.0
%%Creator: dvips(k) 5.85 Copyright 1999 Radical Eye Software
%%Title: happy.dvi
%%Pages: 41
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Helvetica-Bold Times-Roman Times-Bold Times-Italic
%%+ Courier Courier-Bold
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips happy.dvi -o happy.ps
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.10.05:1721
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
%%BeginProcSet: color.pro
%!
TeXDict begin/setcmykcolor where{pop}{/setcmykcolor{dup 10 eq{pop
setrgbcolor}{1 sub 4 1 roll 3{3 index add neg dup 0 lt{pop 0}if 3 1 roll
}repeat setrgbcolor pop}ifelse}B}ifelse/TeXcolorcmyk{setcmykcolor}def
/TeXcolorrgb{setrgbcolor}def/TeXcolorgrey{setgray}def/TeXcolorgray{
setgray}def/TeXcolorhsb{sethsbcolor}def/currentcmykcolor where{pop}{
/currentcmykcolor{currentrgbcolor 10}B}ifelse/DC{exch dup userdict exch
known{pop pop}{X}ifelse}B/GreenYellow{0.15 0 0.69 0 setcmykcolor}DC
/Yellow{0 0 1 0 setcmykcolor}DC/Goldenrod{0 0.10 0.84 0 setcmykcolor}DC
/Dandelion{0 0.29 0.84 0 setcmykcolor}DC/Apricot{0 0.32 0.52 0
setcmykcolor}DC/Peach{0 0.50 0.70 0 setcmykcolor}DC/Melon{0 0.46 0.50 0
setcmykcolor}DC/YellowOrange{0 0.42 1 0 setcmykcolor}DC/Orange{0 0.61
0.87 0 setcmykcolor}DC/BurntOrange{0 0.51 1 0 setcmykcolor}DC
/Bittersweet{0 0.75 1 0.24 setcmykcolor}DC/RedOrange{0 0.77 0.87 0
setcmykcolor}DC/Mahogany{0 0.85 0.87 0.35 setcmykcolor}DC/Maroon{0 0.87
0.68 0.32 setcmykcolor}DC/BrickRed{0 0.89 0.94 0.28 setcmykcolor}DC/Red{
0 1 1 0 setcmykcolor}DC/OrangeRed{0 1 0.50 0 setcmykcolor}DC/RubineRed{
0 1 0.13 0 setcmykcolor}DC/WildStrawberry{0 0.96 0.39 0 setcmykcolor}DC
/Salmon{0 0.53 0.38 0 setcmykcolor}DC/CarnationPink{0 0.63 0 0
setcmykcolor}DC/Magenta{0 1 0 0 setcmykcolor}DC/VioletRed{0 0.81 0 0
setcmykcolor}DC/Rhodamine{0 0.82 0 0 setcmykcolor}DC/Mulberry{0.34 0.90
0 0.02 setcmykcolor}DC/RedViolet{0.07 0.90 0 0.34 setcmykcolor}DC
/Fuchsia{0.47 0.91 0 0.08 setcmykcolor}DC/Lavender{0 0.48 0 0
setcmykcolor}DC/Thistle{0.12 0.59 0 0 setcmykcolor}DC/Orchid{0.32 0.64 0
0 setcmykcolor}DC/DarkOrchid{0.40 0.80 0.20 0 setcmykcolor}DC/Purple{
0.45 0.86 0 0 setcmykcolor}DC/Plum{0.50 1 0 0 setcmykcolor}DC/Violet{
0.79 0.88 0 0 setcmykcolor}DC/RoyalPurple{0.75 0.90 0 0 setcmykcolor}DC
/BlueViolet{0.86 0.91 0 0.04 setcmykcolor}DC/Periwinkle{0.57 0.55 0 0
setcmykcolor}DC/CadetBlue{0.62 0.57 0.23 0 setcmykcolor}DC
/CornflowerBlue{0.65 0.13 0 0 setcmykcolor}DC/MidnightBlue{0.98 0.13 0
0.43 setcmykcolor}DC/NavyBlue{0.94 0.54 0 0 setcmykcolor}DC/RoyalBlue{1
0.50 0 0 setcmykcolor}DC/Blue{1 1 0 0 setcmykcolor}DC/Cerulean{0.94 0.11
0 0 setcmykcolor}DC/Cyan{1 0 0 0 setcmykcolor}DC/ProcessBlue{0.96 0 0 0
setcmykcolor}DC/SkyBlue{0.62 0 0.12 0 setcmykcolor}DC/Turquoise{0.85 0
0.20 0 setcmykcolor}DC/TealBlue{0.86 0 0.34 0.02 setcmykcolor}DC
/Aquamarine{0.82 0 0.30 0 setcmykcolor}DC/BlueGreen{0.85 0 0.33 0
setcmykcolor}DC/Emerald{1 0 0.50 0 setcmykcolor}DC/JungleGreen{0.99 0
0.52 0 setcmykcolor}DC/SeaGreen{0.69 0 0.50 0 setcmykcolor}DC/Green{1 0
1 0 setcmykcolor}DC/ForestGreen{0.91 0 0.88 0.12 setcmykcolor}DC
/PineGreen{0.92 0 0.59 0.25 setcmykcolor}DC/LimeGreen{0.50 0 1 0
setcmykcolor}DC/YellowGreen{0.44 0 0.74 0 setcmykcolor}DC/SpringGreen{
0.26 0 0.76 0 setcmykcolor}DC/OliveGreen{0.64 0 0.95 0.40 setcmykcolor}
DC/RawSienna{0 0.72 1 0.45 setcmykcolor}DC/Sepia{0 0.83 1 0.70
setcmykcolor}DC/Brown{0 0.81 1 0.60 setcmykcolor}DC/Tan{0.14 0.42 0.56 0
setcmykcolor}DC/Gray{0 0 0 0.50 setcmykcolor}DC/Black{0 0 0 1
setcmykcolor}DC/White{0 0 0 0 setcmykcolor}DC end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (happy.dvi)
@start /Fa 135[54 5[54 2[54 54 54 54 6[54 54 2[54 59[54
37[{TeXBase1Encoding ReEncodeFont}10 89.6638 /Courier-Bold
rf /Fb 134[80 80 112 80 88 48 80 56 88 88 88 88 128 40
80 1[40 88 88 1[80 88 80 88 80 12[88 96 104 1[96 1[104
120 88 3[104 2[96 104 2[104 10[80 80 80 80 80 80 2[40
4[48 48 40[{TeXBase1Encoding ReEncodeFont}43 143.462
/Helvetica-Bold rf /Fc 106[28 149[{TeXBase1Encoding ReEncodeFont}1
79.7012 /Times-Roman rf /Fd 134[45 1[65 45 45 25 35 30
1[45 45 45 70 25 2[25 45 45 30 40 45 40 45 40 7[65 65
85 65 65 55 50 60 65 50 65 65 80 55 2[30 65 65 50 55
65 60 60 65 5[25 25 45 7[45 1[25 22 1[22 2[30 30 5[37
31[50 2[{TeXBase1Encoding ReEncodeFont}55 89.6638 /Times-Roman
rf /Fe 68[54 61[54 54 54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 54 54 1[54 54 54 54 54 54 54 54 54 54 54
54 54 54 54 54 3[54 1[54 54 54 1[54 54 54 54 54 54 54
54 54 54 54 54 54 54 54 54 54 1[54 54 54 54 54 54 2[54
1[54 54 54 54 54 54 54 54 54 54 54 54 54 54 1[54 54 54
54 34[{TeXBase1Encoding ReEncodeFont}82 89.6638 /Courier
rf /Ff 134[44 44 1[44 50 28 39 39 50 50 50 50 72 28 44
1[28 50 50 28 44 50 44 1[50 11[72 55 50 9[33 72 72 61
2[66 9[50 50 50 50 50 50 50 50 50 50 1[25 33 45[{
TeXBase1Encoding ReEncodeFont}42 99.6264 /Times-Italic
rf /Fg 134[50 50 72 50 55 33 39 44 1[55 50 55 83 28 55
1[28 55 50 33 44 55 44 1[50 11[72 66 55 4[72 4[39 78
78 61 13[50 50 50 50 50 50 50 50 50 1[25 33 45[{
TeXBase1Encoding ReEncodeFont}41 99.6264 /Times-Bold
rf /Fh 134[115 115 1[115 126 69 115 80 1[126 126 126
184 57 115 1[57 126 126 69 115 126 115 126 115 11[149
126 138 9[57 149 161 126 2[149 12[115 115 115 115 115
115 2[57 46[{TeXBase1Encoding ReEncodeFont}37 206.584
/Helvetica-Bold rf /Fi 86[76 17[100 2[44 44 24[44 50
50 72 50 50 28 39 33 50 50 50 50 78 28 50 28 28 50 50
33 44 50 44 50 44 33 50 5[72 1[94 72 72 61 55 66 1[55
72 72 89 61 72 39 33 72 72 55 61 72 66 66 72 1[44 56
1[56 28 28 50 50 50 50 50 50 50 50 50 50 28 25 33 25
2[33 33 33 1[83 3[33 29[55 55 2[{TeXBase1Encoding ReEncodeFont}81
99.6264 /Times-Roman rf /Fj 134[55 3[61 1[55 39 1[61
6[28 3[55 61 2[55 11[72 12[72 78 71[{TeXBase1Encoding ReEncodeFont}12
99.6264 /Helvetica-Bold rf /Fk 134[96 96 134 96 105 57
96 67 105 105 105 105 153 48 96 1[48 105 105 57 96 105
96 105 96 12[105 115 124 1[115 134 1[143 105 3[124 134
105 115 124 124 124 124 10[96 96 96 96 96 96 2[48 57
41[105 3[{TeXBase1Encoding ReEncodeFont}48 172.154 /Helvetica-Bold
rf /Fl 134[138 3[151 1[138 96 1[151 6[69 3[138 151 2[138
11[179 12[179 193 71[{TeXBase1Encoding ReEncodeFont}12
247.895 /Helvetica-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop Black Black 868 677 a Fl(Happ)l(y)70 b(User)f(Guide)1358
2022 y Fk(Simon)48 b(Marlo)m(w)1564 2353 y(And)m(y)h(Gill)p
Black Black eop
%%Page: 2 2
2 1 bop Black Black -2 579 a Fj(Happ)o(y)27 b(User)i(Guide)-2
708 y Fi(by)24 b(Simon)g(Marlo)n(w)-2 967 y(by)g(Andy)h(Gill)-2
1226 y(Cop)o(yright)f(\251)g(1997-1999)g(by)g(Simon)h(Marlo)n(w)-2
1505 y(This)f(document)g(describes)g(Happ)o(y)-6 b(,)24
b(the)h(Hask)o(ell)f(P)o(arser)h(Generator)l(,)h(v)o(ersion)d(1.6.)p
Black Black eop
%%Page: 3 3
3 2 bop Black Black -2 647 a Fh(T)-17 b(ab)n(le)58 b(of)g(Contents)396
879 y Fg(1.)25 b(Intr)n(oduction)p Black 7 w(.)p Black
Black 2 w(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black(5)596 1029 y Fi(1.1.)f(Compatibility)p
Black 17 w(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black(5)596 1158 y(1.2.)g(Reporting)g(Bugs)p Black 19
w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black(6)596
1288 y(1.3.)g(License)p Black 14 w(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black(6)596 1417 y(1.4.)g(Obtaining)f(Happ)o(y)p
Black 9 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black(7)396 1567 y Fg(2.)i(Using)f(Happy)p
Black 16 w(.)p Black Black 1 w(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black(8)596 1716 y Fi(2.1.)g(Returning)g(other)h
(datatypes)p Black 16 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black(13)596
1846 y(2.2.)f(P)o(arsing)g(sequences)p Black 21 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(14)795
1975 y(2.2.1.)g(Sequences)h(with)f(separators)p Black
20 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(15)596
2105 y(2.3.)g(Ambiguities)p Black 5 w(.)p Black Black
-2 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black(16)596
2234 y(2.4.)g(T)-8 b(ype)25 b(Signatures)p Black 5 w(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black(16)596 2364 y(2.5.)f(Monadic)g(P)o(arsers)p
Black 7 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(17)795
2493 y(2.5.1.)g(Handling)g(P)o(arse)h(Errors)p Black
13 w(.)p Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(19)795
2623 y(2.5.2.)f(Threaded)h(Le)o(x)o(ers)p Black 3 w(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black(21)795 2752 y(2.5.3.)f(Line)g
(Numbers)p Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black(23)795 2882 y(2.5.4.)g(Summary)p Black
11 w(.)p Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(24)596
3011 y(2.6.)g(The)h(Error)g(T)-8 b(ok)o(en)p Black 12
w(.)p Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(25)396
3161 y Fg(3.)25 b(In)l(v)o(oking)g(Happy)p Black 7 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black(27)396
3310 y(4.)g(Syntax)g(of)g(Grammar)g(Files)p Black 14
w(.)p Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black(30)596 3460 y Fi(4.1.)f(Le)o(xical)g(Rules)p
Black 24 w(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black(30)596 3589 y(4.2.)g(Module)g(Header)p
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black(31)596 3719 y(4.3.)g(Directi)n(v)o(es)p
Black 16 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black(31)795 3848 y(4.3.1.)g(T)-8 b(ok)o(en)24 b(T)-8
b(ype)p Black 6 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black(31)795 3978 y(4.3.2.)24 b(T)-8
b(ok)o(ens)p Black 15 w(.)p Black Black -1 w(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black(32)795 4107 y(4.3.3.)24
b(P)o(arser)h(Name)p Black 13 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(32)795
4237 y(4.3.4.)f(Monad)g(Directi)n(v)o(e)p Black 22 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black(32)795 4366 y(4.3.5.)g(Le)o(xical)g(Analyser)p
Black 16 w(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black(33)596 4496 y(4.4.)g(Grammar)p
Black 16 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black(33)596 4625 y(4.5.)g(Module)g(T)m(railer)p
Black 20 w(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black(34)396 4775 y Fg(5.)h(Inf)n(o)f
(Files)p Black 24 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black(35)p Black 3833 5278
a Ff(3)p Black eop
%%Page: 4 4
4 3 bop Black Black 396 579 a Fg(6.)25 b(T)n(ips)p Black
13 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(36)596
728 y Fi(6.1.)f(Performance)i(T)m(ips)p Black 15 w(.)p
Black Black -2 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black(36)596 858 y(6.2.)e(Compilation-T)m(ime)e(T)m
(ips)p Black 10 w(.)p Black Black -2 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(36)596
987 y(6.3.)i(Finding)g(T)-8 b(ype)24 b(Errors)p Black
16 w(.)p Black Black 1 w(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black(37)596 1117 y(6.4.)g(Con\003ict)h(T)m(ips)p
Black 3 w(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black(38)795
1246 y(6.4.1.)f(LALR\(1\))h(parsers)p Black 14 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black(39)p Black -2 5278 a Ff(4)p Black eop
%%Page: 5 5
5 4 bop Black Black -2 647 a Fh(Chapter)58 b(1.)f(Intr)l(oduction)396
944 y Fi(Happ)o(y)24 b(is)f(a)i(parser)f(generator)g(system)f(for)h
(Hask)o(ell,)g(similar)f(to)g(the)h(tool)f(yaccfor)i(C.)f(Lik)o(e)g
(yacc,)396 1073 y(it)h(tak)o(es)f(a)h(\002le)h(containing)d(an)i
(annotated)f(BNF)i(speci\002cation)e(of)h(a)h(grammar)e(and)h(produces)
f(a)396 1203 y(Hask)o(ell)h(module)e(containing)h(a)h(parser)g(for)g
(the)g(grammar)-5 b(.)396 1382 y(Happ)o(y)25 b(is)f(\003e)o(xible;)g
(unlik)o(e)g(yacc,)h(you)g(can)g(ha)n(v)o(e)f(se)n(v)o(eral)h(Happ)o(y)
f(parsers)h(in)f(the)h(same)396 1512 y(program.)g(Happ)o(y)f(can)h(w)o
(ork)g(in)f(conjunction)g(with)g(a)h(le)o(xical)f(analyser)h(supplied)e
(by)i(the)f(user)396 1641 y(\(either)h(hand-written)f(or)h(generated)g
(by)g(another)f(program\),)h(or)g(it)f(can)h(parse)g(a)h(stream)e(of)
396 1771 y(characters)i(directly)e(\(b)n(ut)h(this)e(isn')n(t)i
(practical)g(in)f(most)g(cases\).)h(In)g(a)g(future)g(v)o(ersion)e(we)j
(hope)e(to)396 1900 y(include)g(a)i(le)o(xical)e(analyser)g(generator)i
(with)e(Happ)o(y)g(as)h(a)g(single)f(package.)396 2080
y(P)o(arsers)h(generated)h(by)e(Happ)o(y)h(are)g(f)o(ast;)g(generally)f
(f)o(aster)h(than)g(an)g(equi)n(v)n(alent)e(parser)i(written)396
2209 y(using)f(parsing)g(combinators)g(or)h(similar)e(tools.)h
(Furthermore,)h(an)o(y)f(future)h(impro)o(v)o(ements)396
2339 y(made)g(to)f(Happ)o(y)h(will)f(bene\002t)h(an)g(e)o(xisting)e
(grammar)l(,)h(without)g(need)h(for)g(a)g(re)n(write.)396
2518 y(Happ)o(y)g(is)f(suf)n(\002ciently)g(po)n(werful)g(to)g(parse)h
(Hask)o(ell)g(itself)f(-)h(there')-5 b(s)24 b(a)i(freely)f(a)n(v)n
(ailable)f(Hask)o(ell)396 2648 y(parser)i(written)e(using)f(Happ)o(y)i
(which)f(can)i(be)f(obtained)f(from)49 b(The)25 b Fe(hsparser)e
Fi(P)o(age)396 2777 y(\(http://www)-6 b(.pms.informatik.uni-)396
2907 y(muenchen.de/mitarbeiter/panne/hask)o(ell_libs/hsparser)h
(.html\).)396 3086 y(Happ)o(y)25 b(can)g(currently)g(generate)g(three)g
(types)f(of)h(parser)g(from)g(a)g(gi)n(v)o(en)e(grammar)l(,)i(the)f
(intention)396 3215 y(being)g(that)g(we)h(can)g(e)o(xperiment)f(with)f
(dif)n(ferent)i(kinds)e(of)i(functional)e(code)i(to)f(see)h(which)f(is)
g(the)396 3345 y(best,)h(and)f(compiler)g(writers)h(can)g(use)g(the)g
(dif)n(ferent)f(types)g(of)h(parser)g(to)g(tune)f(their)h(compilers.)
396 3474 y(The)g(types)f(of)h(parser)g(supported)f(are:)p
Black 476 3753 a(1.)p Black 25 w(`standard')g(Hask)o(ell)h(98)f
(\(should)g(w)o(ork)h(with)f(an)o(y)g(compiler)g(that)g(compiles)g
(Hask)o(ell)g(98\).)p Black 476 3933 a(2.)p Black 25
w(standard)g(Hask)o(ell)g(using)g(arrays)75 b(\(this)24
b(is)h(not)f(the)g(def)o(ault)h(because)g(we)g(ha)n(v)o(e)g(found)f
(this)576 4062 y(generates)h(slo)n(wer)f(parsers)h(than)f(1\).)p
Black 476 4242 a(3.)p Black 25 w(Hask)o(ell)g(with)g(GHC)h(\(Glasgo)n
(w)f(Hask)o(ell\))g(e)o(xtensions.)f(This)h(is)h(a)g(slightly)e(f)o
(aster)i(option)576 4371 y(than)f(1)h(for)g(Glasgo)n(w)e(Hask)o(ell)i
(users.)p Black 3833 5278 a Ff(5)p Black eop
%%Page: 6 6
6 5 bop Black -2 67 a Ff(Chapter)24 b(1.)h(Intr)l(oduction)p
Black -2 621 a Fk(1.1.)47 b(Compatibility)396 837 y Fi(Happ)o(y)25
b(is)f(written)g(in)h(Hask)o(ell)f(98.)g(This)g(means)h(that)f(it)h
(will)e(compile)h(under)h(Glasgo)n(w)f(Hask)o(ell)396
967 y(\(recommended\),)h(hbc,)f(Hugs,)h(and)f(an)o(y)h(other)f(Hask)o
(ell)h(98)f(compiler)-5 b(.)396 1146 y(Remember:)25 b(parsers)g
(produced)g(using)e(Happ)o(y)i(should)f(compile)f(happily)h(\(sic\))h
(under)g(an)o(y)396 1275 y(Hask)o(ell)g(98)f(complier)-5
b(.)24 b(A)g(compatibility)f(mode)h(enables)h(Happ)o(y)f(to)h(generate)
g(parsers)g(that)f(will)396 1405 y(compile)g(with)g(a)h(Hask)o(ell)g
(1.2)f(compiler)l(,)g(such)h(as)f(GHC)i(0.29.)-2 1907
y Fk(1.2.)47 b(Repor)s(ting)i(Bugs)396 2123 y Fi(An)o(y)24
b(b)n(ugs)g(found)h(in)f(Happ)o(y)h(should)e(be)i(reported)g(to)f(me:)h
(Simon)f(Marlo)n(w)396 2252 y(<)p Fe(simonmar@microsoft.com)p
Fi(>)d(including)i(all)i(the)g(rele)n(v)n(ant)e(information:)g(-)j(the)
e(compiler)396 2382 y(used)h(to)f(compile)g(Happ)o(y,)h(the)f
(command-line)g(options)f(used,)h(your)h(grammar)f(\002le)i(or)f(a)396
2511 y(cut-do)n(wn)f(e)o(xample)g(sho)n(wing)f(the)i(problem,)e(and)i
(a)g(description)f(of)h(what)f(goes)h(wrong.)f(A)396
2641 y(patch)h(to)f(\002x)h(the)g(problem)f(w)o(ould)g(also)g(be)h
(greatly)g(appreciated.)396 2820 y(Requests)g(for)g(ne)n(w)f(features)i
(should)d(also)i(be)g(sent)f(to)g(the)h(abo)o(v)o(e)f(address,)g
(especially)h(if)396 2950 y(accompanied)g(by)f(patches.)h(Y)-11
b(ou)24 b(ne)n(v)o(er)h(kno)n(w)-6 b(,)23 b(if)i(I)g(get)f(another)h
(request)g(to)f(implement)396 3079 y(yacc-style)h(precedences,)h(I)f
(might)e(just)h(do)h(it)f(:-\))-2 3582 y Fk(1.3.)47 b(License)396
3797 y Fi(Pre)n(vious)24 b(v)o(ersions)g(of)h(Happ)o(y)f(were)i(co)o(v)
o(ered)e(by)g(the)h(GNU)g(general)g(public)f(license.)g(W)-8
b(e')j(re)396 3927 y(no)n(w)24 b(distrib)n(uting)f(Happ)o(y)h(with)g(a)
h(less)g(restricti)n(v)o(e)e(BSD-style)i(license:)496
4143 y Fd(Cop)o(yright)c(1999,)h(Simon)g(Marlo)n(w)f(and)h(Andy)f
(Gill.)i(All)f(rights)f(reserv)o(ed.)496 4309 y(Redistrib)n(ution)g
(and)h(use)f(in)i(source)e(and)h(binary)f(forms,)h(with)g(or)g(without)
g(modi\002cation,)f(are)496 4426 y(permitted)g(pro)o(vided)g(that)h
(the)g(follo)n(wing)f(conditions)g(are)h(met:)p Black
496 4692 a Fc(\225)p Black 72 w Fd(Redistrib)n(utions)e(of)i(source)g
(code)f(must)h(retain)g(the)g(abo)o(v)o(e)f(cop)o(yright)g(notice,)h
(this)g(list)g(of)596 4808 y(conditions)f(and)g(the)h(follo)n(wing)f
(disclaimer)-5 b(.)p Black -2 5278 a Ff(6)p Black eop
%%Page: 7 7
7 6 bop Black 2938 67 a Ff(Chapter)25 b(1.)g(Intr)l(oduction)p
Black Black 496 579 a Fc(\225)p Black 94 w Fd(Redistrib)n(utions)c(in)h
(binary)f(form)h(must)g(reproduce)f(the)h(abo)o(v)o(e)e(cop)o(yright)i
(notice,)g(this)g(list)g(of)596 695 y(conditions)f(and)g(the)h(follo)n
(wing)f(disclaimer)g(in)h(the)g(documentation)f(and/or)g(other)h
(materials)596 812 y(pro)o(vided)e(with)i(the)g(distrib)n(ution.)496
978 y(THIS)g(SOFTW)-11 b(ARE)20 b(IS)j(PR)l(O)l(VIDED)d(BY)i(THE)g
(COPYRIGHT)e(HOLDERS)h("AS)h(IS")f(AND)496 1095 y(ANY)h(EXPRESS)f(OR)h
(IMPLIED)f(W)-11 b(ARRANTIES,)20 b(INCLUDING,)h(B)o(UT)h(NO)l(T)g
(LIMITED)f(T)n(O,)496 1212 y(THE)h(IMPLIED)f(W)-11 b(ARRANTIES)20
b(OF)i(MERCHANT)-8 b(ABILITY)19 b(AND)i(FITNESS)h(FOR)f(A)496
1328 y(P)-8 b(AR)j(TICULAR)20 b(PURPOSE)h(ARE)g(DISCLAIMED.)g(IN)h(NO)g
(EVENT)f(SHALL)h(THE)496 1445 y(COPYRIGHT)e(HOLDERS)h(BE)h(LIABLE)f
(FOR)h(ANY)g(DIRECT)-7 b(,)22 b(INDIRECT)-7 b(,)21 b(INCIDENT)-8
b(AL,)496 1561 y(SPECIAL,)21 b(EXEMPLAR)-6 b(Y)-12 b(,)22
b(OR)g(CONSEQ)o(UENTIAL)d(D)l(AMA)l(GES)j(\(INCLUDING,)f(B)o(UT)496
1678 y(NO)l(T)h(LIMITED)f(T)n(O,)i(PR)l(OCUREMENT)d(OF)i(SUBSTITUTE)e
(GOODS)i(OR)g(SER)-7 b(VICES;)496 1794 y(LOSS)22 b(OF)g(USE,)g(D)l(A)
-10 b(T)i(A,)22 b(OR)g(PR)l(OFITS;)f(OR)h(B)o(USINESS)f(INTERR)l
(UPTION\))f(HO)m(WEVER)496 1911 y(CA)-5 b(USED)21 b(AND)h(ON)g(ANY)f
(THEOR)-6 b(Y)21 b(OF)h(LIABILITY)-12 b(,)22 b(WHETHER)f(IN)h(CONTRA)l
(CT)-7 b(,)496 2027 y(STRICT)21 b(LIABILITY)-12 b(,)22
b(OR)g(T)n(OR)-5 b(T)21 b(\(INCLUDING)f(NEGLIGENCE)h(OR)h(O)l(THER)-5
b(WISE\))496 2144 y(ARISING)20 b(IN)h(ANY)g(W)-11 b(A)i(Y)21
b(OUT)g(OF)g(THE)g(USE)g(OF)g(THIS)g(SOFTW)-11 b(ARE,)21
b(EVEN)f(IF)i(AD)l(VISED)496 2261 y(OF)g(THE)g(POSSIBILITY)e(OF)i(SUCH)
g(D)l(AMA)l(GE.)-2 2763 y Fk(1.4.)47 b(Obtaining)h(Happ)m(y)396
2979 y Fi(Happ)o(y')-5 b(s)24 b(web)h(page)g(can)g(be)g(found)g(at)f
(http://www)-6 b(.hask)o(ell.or)n(g/happ)o(y/.)21 b(Happ)o(y)j(source)h
(and)396 3108 y(binaries)g(can)g(be)g(do)n(wnloaded)e(from)i(there.)g
(There)g(are)g(se)n(v)o(eral)f(mirrors)h(of)g(this)e(site,)i(b)n(ut)f
(since)396 3238 y(the)o(y)g(tend)h(to)f(mo)o(v)o(e)f(around)i(a)g(bit)f
(I)h(w)o(on')n(t)g(mention)e(them)h(here.)p Black 3830
5278 a Ff(7)p Black eop
%%Page: 8 8
8 7 bop Black Black -2 647 a Fh(Chapter)58 b(2.)f(Using)i(Happ)m(y)396
944 y Fi(Users)25 b(of)g(Y)-10 b(acc)25 b(will)f(\002nd)h(Happ)o(y)g
(quite)f(f)o(amiliar)-5 b(.)24 b(The)h(basic)f(idea)h(is)f(as)h(follo)n
(ws:)p Black 396 1223 a Fc(\225)p Black 72 w Fi(De\002ne)g(the)g
(grammar)g(you)f(w)o(ant)h(to)f(parse)h(in)f(a)i(Happ)o(y)e(grammar)h
(\002le.)p Black 396 1402 a Fc(\225)p Black 97 w Fi(Run)g(the)f
(grammar)h(through)f(Happ)o(y,)g(to)h(generate)g(a)g(compilable)f(Hask)
o(ell)g(module.)p Black 396 1582 a Fc(\225)p Black 97
w Fi(Use)h(this)e(module)h(as)h(part)g(of)g(your)f(Hask)o(ell)h
(program,)f(usually)g(in)g(conjunction)f(with)i(a)496
1711 y(le)o(xical)f(analyser)h(\(a)g(function)f(that)g(splits)g(the)g
(input)g(into)g(\223tok)o(ens\224,)g(the)h(basic)g(unit)f(of)496
1841 y(parsing\).)396 2020 y(Let')-5 b(s)24 b(run)h(through)f(an)h(e)o
(xample.)e(W)-8 b(e')o(ll)25 b(implement)e(a)i(parser)g(for)g(a)g
(simple)f(e)o(xpression)f(syntax,)396 2149 y(consisting)f(of)i(inte)o
(gers,)f(v)n(ariables,)h(the)f(operators)h Fe(+)p Fi(,)g
Fe(-)p Fi(,)g Fe(*)p Fi(,)g Fe(/)p Fi(,)f(and)h(the)g(form)g
Fe(let)53 b(var)g(=)h(exp)396 2279 y(in)g(exp)p Fi(.)24
b(The)h(grammar)f(\002le)h(starts)g(of)n(f)f(lik)o(e)h(this:)396
2495 y Fe({)396 2612 y(module)53 b(Main)g(where)396 2728
y(})396 2957 y Fi(At)25 b(the)f(top)h(of)g(the)f(\002le)h(is)g(an)g
(optional)e Ff(module)h(header)r Fi(,)50 b(which)24 b(is)h(just)f(a)h
(Hask)o(ell)f(module)396 3087 y(header)i(enclosed)e(in)h(braces.)g
(This)f(code)h(is)f(emitted)g(v)o(erbatim)g(into)g(the)g(generated)h
(module,)f(so)396 3216 y(you)h(can)g(put)f(an)o(y)g(Hask)o(ell)h(code)g
(here)g(at)g(all.)f(In)h(a)g(grammar)g(\002le,)g(Hask)o(ell)f(code)h
(is)g(al)o(w)o(ays)396 3346 y(contained)g(between)f(curly)h(braces)g
(to)g(distinguish)d(it)i(from)h(the)g(grammar)-5 b(.)396
3525 y(In)25 b(this)f(case,)h(the)g(parser)g(will)f(be)h(a)g
(standalone)f(program)h(so)f(we')o(ll)h(call)g(the)f(module)g
Fe(Main)p Fi(.)396 3705 y(Ne)o(xt)g(comes)h(a)g(couple)f(of)h
(declarations:)396 3921 y Fe(\045name)53 b(calc)396 4037
y(\045tokentype)f({)i(Token)e(})396 4267 y Fi(The)25
b(\002rst)g(line)f(declares)i(the)e(name)h(of)g(the)g(parsing)f
(function)g(that)g(Happ)o(y)h(will)e(generate,)j(in)e(this)396
4396 y(case)i Fe(calc)p Fi(.)e(In)h(man)o(y)e(cases,)i(this)f(is)h(the)
f(only)g(symbol)g(you)g(need)h(to)f(e)o(xport)g(from)h(the)f(module.)
396 4575 y(The)h(second)g(line)f(declares)h(the)g(type)f(of)h(tok)o
(ens)f(that)h(the)f(parser)i(will)e(accept.)h(The)g(parser)g(\(i.e.)396
4705 y(the)g(function)f Fe(calc)p Fi(\))g(will)g(be)h(of)g(type)f
Fe([Token])53 b(->)g(T)p Fi(,)25 b(where)g Fe(T)g Fi(is)f(the)h(return)
g(type)f(of)h(the)396 4834 y(parser)l(,)g(determined)g(by)f(the)h
(production)e(rules)i(belo)n(w)-6 b(.)p Black 3833 5278
a Ff(8)p Black eop
%%Page: 9 9
9 8 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(No)n(w)g(we)h(declare)h(all)e(the)h(possible)f(tok)o
(ens:)396 795 y Fe(\045token)719 912 y(let)699 b({)53
b(TokenLet)g(})719 1028 y(in)753 b({)53 b(TokenIn)g(})719
1145 y(int)699 b({)53 b(TokenInt)g($$)g(})719 1261 y(var)699
b({)53 b(TokenVar)g($$)g(})719 1378 y('=')699 b({)53
b(TokenEq)g(})719 1494 y('+')699 b({)53 b(TokenPlus)f(})719
1611 y('-')699 b({)53 b(TokenMinus)f(})719 1728 y('*')699
b({)53 b(TokenTimes)f(})719 1844 y('/')699 b({)53 b(TokenDiv)g(})719
1961 y('\(')699 b({)53 b(TokenOB)g(})719 2077 y('\)')699
b({)53 b(TokenCB)g(})396 2306 y Fi(The)25 b(symbols)e(on)i(the)f(left)h
(are)h(the)e(tok)o(ens)g(as)h(the)o(y)f(will)g(be)h(referred)h(to)f(in)
f(the)h(rest)f(of)h(the)396 2436 y(grammar)l(,)g(and)g(to)f(the)h
(right)f(of)h(each)g(tok)o(en)f(enclosed)h(in)f(braces)i(is)e(a)h(Hask)
o(ell)f(pattern)h(that)396 2565 y(matches)g(the)f(tok)o(en.)g(The)h
(parser)h(will)e(e)o(xpect)g(to)g(recei)n(v)o(e)h(a)g(stream)g(of)f
(tok)o(ens,)g(each)i(of)f(which)396 2695 y(will)f(match)h(one)f(of)h
(the)g(gi)n(v)o(en)e(patterns)h(\(the)h(de\002nition)f(of)h(the)g
Fe(Token)f Fi(datatype)g(is)g(gi)n(v)o(en)396 2824 y(later\).)396
3004 y(The)h Fe($$)g Fi(symbol)e(is)h(a)h(placeholder)g(that)f
(represents)h(the)g Ff(value)g Fi(of)f(this)g(tok)o(en.)g(Normally)g
(the)396 3133 y(v)n(alue)g(of)h(a)h(tok)o(en)e(is)g(the)h(tok)o(en)f
(itself,)g(b)n(ut)g(by)h(using)f(the)g Fe($$)h Fi(symbol)e(you)h(can)i
(specify)e(some)396 3263 y(component)g(of)h(the)f(tok)o(en)h(object)f
(to)h(be)f(the)h(v)n(alue.)396 3442 y(Lik)o(e)g(yacc,)g(we)g(include)f
Fe(\045\045)h Fi(here,)g(for)g(no)g(real)g(reason.)396
3658 y Fe(\045\045)396 3888 y Fi(No)n(w)f(we)h(ha)n(v)o(e)g(the)g
(production)e(rules)i(for)g(the)f(grammar)-5 b(.)396
4104 y Fe(Exp)161 b(:)54 b(let)f(var)g('=')g(Exp)g(in)h(Exp)107
b({)53 b(Let)h($2)f($4)g($6)h(})719 4220 y(|)g(Exp1)1075
b({)53 b(Exp1)g($1)h(})396 4453 y(Exp1)107 b(:)54 b(Exp1)f('+')g(Term)
591 b({)53 b(Plus)g($1)h($3)f(})719 4570 y(|)h(Exp1)f('-')g(Term)591
b({)53 b(Minus)g($1)h($3)f(})719 4687 y(|)h(Term)1075
b({)53 b(Term)g($1)h(})p Black 3833 5278 a Ff(9)p Black
eop
%%Page: 10 10
10 9 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fe(Term)107 b(:)54 b(Term)f('*')g(Factor)483
b({)53 b(Times)g($1)h($3)f(})719 695 y(|)h(Term)f('/')g(Factor)483
b({)53 b(Div)h($1)f($3)g(})719 812 y(|)h(Factor)967 b({)53
b(Factor)g($1)g(})396 1045 y(Factor)719 1162 y(:)h(int)1129
b({)53 b(Int)h($1)f(})719 1278 y(|)h(var)1129 b({)53
b(Var)h($1)f(})719 1395 y(|)h('\(')f(Exp)g('\)')699 b({)53
b(Brack)g($2)h(})396 1624 y Fi(Each)25 b(production)f(consists)f(of)i
(a)g Ff(non-terminal)f Fi(symbol)f(on)h(the)h(left,)g(follo)n(wed)e(by)
i(a)g(colon,)396 1754 y(follo)n(wed)f(by)g(one)h(or)g(more)g(e)o
(xpansions)e(on)h(the)h(right,)f(separated)h(by)g Fe(|)p
Fi(.)f(Each)h(e)o(xpansion)f(has)396 1883 y(some)g(Hask)o(ell)h(code)g
(associated)f(with)g(it,)g(enclosed)h(in)f(braces)i(as)f(usual.)396
2062 y(The)g(w)o(ay)g(to)f(think)g(about)g(a)i(parser)f(is)f(with)g
(each)i(symbol)d(ha)n(ving)h(a)h(`v)n(alue':)f(we)i(de\002ned)f(the)396
2192 y(v)n(alues)f(of)h(the)g(tok)o(ens)f(abo)o(v)o(e,)g(and)g(the)h
(grammar)f(de\002nes)i(the)e(v)n(alues)g(of)h(non-terminal)396
2321 y(symbols)e(in)i(terms)f(of)h(sequences)g(of)g(other)f(symbols)f
(\(either)i(tok)o(ens)f(or)h(non-terminals\).)f(In)g(a)396
2451 y(production)g(lik)o(e)g(this:)396 2667 y Fe(n)161
b(:)54 b(t_1)f(...)g(t_n)161 b({)54 b(E)f(})396 2896
y Fi(whene)n(v)o(er)24 b(the)h(parser)g(\002nds)g(the)g(symbols)e
Fe(t_1..t_n)g Fi(in)h(the)h(tok)o(en)f(stream,)h(it)f(constructs)g(the)
396 3026 y(symbol)g Fe(n)g Fi(and)h(gi)n(v)o(es)e(it)i(the)f(v)n(alue)g
Fe(E)p Fi(,)h(which)f(may)h(refer)h(to)e(the)h(v)n(alues)f(of)h
Fe(t_1...t_n)e Fi(using)396 3155 y(the)i(symbols)e Fe($1...$n)p
Fi(.)396 3335 y(The)i(parser)g(reduces)h(the)e(input)g(using)g(the)g
(rules)h(in)f(the)h(grammar)g(until)e(just)h(one)h(symbol)396
3464 y(remains:)f(the)h(\002rst)g(symbol)e(de\002ned)i(in)g(the)f
(grammar)h(\(namely)f Fe(Exp)h Fi(in)f(our)h(e)o(xample\).)f(The)396
3594 y(v)n(alue)g(of)h(this)f(symbol)g(is)g(the)h(return)f(v)n(alue)h
(from)f(the)h(parser)-5 b(.)396 3773 y(T)d(o)25 b(complete)f(the)h
(program,)f(we)h(need)g(some)f(e)o(xtra)h(code.)g(The)g(grammar)f
(\002le)h(may)g(optionally)396 3902 y(contain)f(a)i(\002nal)f(code)g
(section,)f(enclosed)g(in)h(curly)f(braces.)396 4119
y Fe({)396 4348 y Fi(All)g(parsers)i(must)d(declare)j(the)e(function)g
Fe(happyError)p Fi(,)f(which)i(is)f(called)h(when)f(an)h(error)h(is)396
4477 y(detected.)396 4693 y Fe(happyError)52 b(::)h([Token])g(->)g(a)
396 4810 y(happyError)f(_)i(=)f(error)g("Parse)g(error")p
Black -2 5278 a Ff(10)p Black eop
%%Page: 11 11
11 10 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fe(happyError)f Fi(doesn')n(t)i(ha)n(v)o(e)f(to)g(call)
h Fe(error)p Fi(:)f(it)g(can)h(return)g(a)g(real)h(v)n(alue,)e(which)g
(must)g(be)h(the)396 708 y(same)g(type)f(as)h(the)g(return)g(v)n(alue)f
(of)h(the)f(parser)i(itself.)e(A)h(con)l(v)o(enient)e(w)o(ay)i(to)g
(deal)f(with)g(errors)396 838 y(is)h(to)f(use)h(an)g(e)o(xception)e
(monad,)h(which)h(we')o(ll)f(talk)h(about)f(in)g(Section)h(2.5.)g(It')
-5 b(s)24 b(also)g(possible)g(to)396 967 y(k)o(eep)h(track)g(of)g(line)
g(numbers)f(in)g(the)h(parser)g(for)g(use)g(in)f(error)i(messages,)e
(this)g(is)g(described)h(in)396 1097 y(Section)g(2.5.3.)396
1276 y(Ne)o(xt)f(we)h(can)h(declare)f(the)g(data)g(type)f(that)g
(represents)h(the)g(parsed)g(e)o(xpression:)396 1492
y Fe(data)53 b(Exp)719 1609 y(=)h(Let)f(String)f(Exp)i(Exp)719
1726 y(|)g(Exp1)f(Exp1)396 1959 y(data)g(Exp1)719 2075
y(=)h(Plus)f(Exp1)g(Term)719 2192 y(|)h(Minus)e(Exp1)h(Term)719
2308 y(|)h(Term)f(Term)396 2542 y(data)g(Term)719 2658
y(=)h(Times)e(Term)h(Factor)719 2775 y(|)h(Div)f(Term)g(Factor)719
2891 y(|)h(Factor)e(Factor)396 3124 y(data)h(Factor)719
3241 y(=)h(Int)f(Int)719 3357 y(|)h(Var)f(String)719
3474 y(|)h(Brack)e(Exp)396 3703 y Fi(And)25 b(the)f(data)h(structure)g
(for)g(the)f(tok)o(ens...)396 3919 y Fe(data)53 b(Token)719
4036 y(=)h(TokenLet)719 4153 y(|)g(TokenIn)719 4269 y(|)g(TokenInt)e
(Int)719 4386 y(|)i(TokenVar)e(String)719 4502 y(|)i(TokenEq)719
4619 y(|)g(TokenPlus)719 4735 y(|)g(TokenMinus)719 4852
y(|)g(TokenTimes)p Black 3784 5278 a Ff(11)p Black eop
%%Page: 12 12
12 11 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 719 579 a Fe(|)54 b(TokenDiv)719 695 y(|)g(TokenOB)719
812 y(|)g(TokenCB)450 929 y(deriving)e(Show)396 1158
y Fi(...)25 b(and)g(a)g(simple)e(le)o(x)o(er)h(that)h(returns)f(this)g
(data)h(structure.)396 1374 y Fe(lexer)53 b(::)g(String)g(->)g([Token])
396 1490 y(lexer)g([])g(=)h([])396 1607 y(lexer)f(\(c:cs\))719
1724 y(|)h(isSpace)e(c)i(=)f(lexer)g(cs)719 1840 y(|)h(isAlpha)e(c)i(=)
f(lexVar)g(\(c:cs\))719 1957 y(|)h(isDigit)e(c)i(=)f(lexNum)g(\(c:cs\))
396 2073 y(lexer)g(\('=':cs\))f(=)i(TokenEq)e(:)i(lexer)f(cs)396
2190 y(lexer)g(\('+':cs\))f(=)i(TokenPlus)e(:)h(lexer)g(cs)396
2306 y(lexer)g(\('-':cs\))f(=)i(TokenMinus)e(:)h(lexer)g(cs)396
2423 y(lexer)g(\('*':cs\))f(=)i(TokenTimes)e(:)h(lexer)g(cs)396
2540 y(lexer)g(\('/':cs\))f(=)i(TokenDiv)e(:)i(lexer)e(cs)396
2656 y(lexer)h(\('\(':cs\))f(=)i(TokenOB)e(:)i(lexer)f(cs)396
2773 y(lexer)g(\('\)':cs\))f(=)i(TokenCB)e(:)i(lexer)f(cs)396
3006 y(lexNum)g(cs)g(=)h(TokenInt)e(\(read)h(num\))g(:)g(lexer)g(rest)
719 3122 y(where)g(\(num,rest\))f(=)h(span)g(isDigit)g(cs)396
3355 y(lexVar)g(cs)g(=)558 3472 y(case)g(span)g(isAlpha)f(cs)h(of)719
3589 y(\("let",rest\))e(->)j(TokenLet)e(:)i(lexer)e(rest)719
3705 y(\("in",rest\))105 b(->)54 b(TokenIn)e(:)i(lexer)f(rest)719
3822 y(\(var,rest\))159 b(->)54 b(TokenVar)e(var)h(:)h(lexer)f(rest)396
4051 y Fi(And)25 b(\002nally)f(a)h(top-le)n(v)o(el)f(function)f(to)i
(tak)o(e)g(some)f(input,)g(parse)h(it,)f(and)h(print)f(out)g(the)h
(result.)396 4267 y Fe(main)53 b(=)h(getContents)d(\273=)j(print)f(.)g
(calc)g(.)h(lexer)396 4384 y(})396 4613 y Fi(And)25 b(that')-5
b(s)24 b(it!)g(A)h(whole)f(le)o(x)o(er)l(,)g(parser)i(and)e(grammar)h
(in)f(a)h(fe)n(w)g(dozen)g(lines.)f(Another)g(good)396
4742 y(e)o(xample)g(is)h(Happ)o(y')-5 b(s)24 b(o)n(wn)f(parser)-5
b(.)25 b(Se)n(v)o(eral)g(features)g(in)g(Happ)o(y)f(were)i(de)n(v)o
(eloped)d(using)h(this)g(as)396 4872 y(an)h(e)o(xample.)p
Black -2 5278 a Ff(12)p Black eop
%%Page: 13 13
13 12 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(T)-8 b(o)25 b(generate)g(the)g(Hask)o(ell)f(module)g
(for)h(this)f(parser)l(,)h(type)g(the)f(command)g Fg(happy)i
(example.ly)396 708 y Fi(\(where)g Fe(example.ly)d Fi(is)h(the)h(name)f
(of)h(the)g(grammar)f(\002le\).)i(The)f(Hask)o(ell)f(module)g(will)g
(be)396 838 y(placed)h(in)g(a)g(\002le)g(named)f Fe(example.hs)p
Fi(.)f(Additionally)-6 b(,)22 b(in)l(v)n(oking)i(the)g(command)g
Fg(happy)396 967 y(example.ly)h(-i)g Fi(will)e(produce)i(the)g(\002le)g
Fe(example.info)e Fi(which)h(contains)g(detailed)396
1097 y(information)g(about)g(the)h(parser)l(,)g(including)e(states)h
(and)h(reduction)f(rules)h(\(see)g(Chapter)g(5\).)g(This)396
1226 y(can)g(be)g(in)l(v)n(aluable)f(for)h(deb)n(ugging)e(parsers,)i(b)
n(ut)g(requires)f(some)h(kno)n(wledge)e(of)i(the)g(operation)396
1356 y(of)g(a)g(shift-reduce)g(parser)-5 b(.)-2 1809
y Fk(2.1.)47 b(Returning)i(other)f(datatypes)396 2024
y Fi(In)25 b(the)g(abo)o(v)o(e)f(e)o(xample,)f(we)j(used)e(a)h(data)g
(type)g(to)f(represent)h(the)g(syntax)f(being)g(parsed.)396
2154 y(Ho)n(we)n(v)o(er)l(,)g(there')-5 b(s)24 b(no)h(reason)g(why)f
(it)g(has)h(to)f(be)h(this)f(w)o(ay:)g(you)h(could)f(calculate)h(the)g
(v)n(alue)f(of)396 2283 y(the)h(e)o(xpression)e(on)i(the)g(\003y)-6
b(,)24 b(using)g(productions)f(lik)o(e)i(this:)396 2499
y Fe(Term)107 b(:)54 b(Term)f('*')g(Factor)483 b({)53
b($1)h(*)f($3)h(})719 2616 y(|)g(Term)f('/')g(Factor)483
b({)53 b($1)h(/)f($3)h(})719 2732 y(|)g(Factor)967 b({)53
b($1)h(})396 2962 y Fi(The)25 b(v)n(alue)f(of)h(a)g Fe(Term)f
Fi(w)o(ould)g(be)h(the)g(v)n(alue)f(of)h(the)g(e)o(xpression)e(itself,)
h(and)h(the)g(parser)g(could)396 3091 y(return)g(an)g(inte)o(ger)-5
b(.)396 3270 y(This)24 b(w)o(orks)h(for)g(simple)e(e)o(xpression)h
(types,)g(b)n(ut)g(our)h(grammar)g(includes)e(v)n(ariables)i(and)f(the)
396 3400 y Fe(let)h Fi(syntax.)f(Ho)n(w)g(do)g(we)h(kno)n(w)f(the)h(v)n
(alue)f(of)h(a)g(v)n(ariable)f(while)g(we')-5 b(re)26
b(parsing)e(it?)h(W)-8 b(e)25 b(don')n(t,)396 3529 y(b)n(ut)g(since)f
(the)h(Hask)o(ell)f(code)h(for)g(a)g(production)f(can)h(be)g(an)o
(ything)e(at)i(all,)f(we)h(could)g(mak)o(e)f(it)h(a)396
3659 y(function)f(that)h(tak)o(es)f(an)h(en)l(vironment)f(of)h(v)n
(ariable)f(v)n(alues,)g(and)h(returns)f(the)h(computed)f(v)n(alue)396
3789 y(of)h(the)g(e)o(xpression:)396 4005 y Fe(Exp)161
b(:)54 b(let)f(var)g('=')g(Exp)g(in)h(Exp)107 b({)53
b(\\p)h(->)f($6)h(\(\($2,$4)e(p\):p\))h(})719 4121 y(|)h(Exp1)1075
b({)53 b($1)h(})396 4354 y(Exp1)107 b(:)54 b(Exp1)f('+')g(Term)591
b({)53 b(\\p)h(->)f($1)h(p)f(+)h($3)f(p)h(})719 4471
y(|)g(Exp1)f('-')g(Term)591 b({)53 b(\\p)h(->)f($1)h(p)f(-)h($3)f(p)h
(})719 4588 y(|)g(Term)1075 b({)53 b($1)h(})396 4821
y(Term)107 b(:)54 b(Term)f('*')g(Factor)483 b({)53 b(\\p)h(->)f($1)h(p)
f(*)h($3)f(p)h(})p Black 3784 5278 a Ff(13)p Black eop
%%Page: 14 14
14 13 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 719 579 a Fe(|)54 b(Term)f('/')g(Factor)483 b({)53
b(\\p)h(->)f($1)h(p)f(`div`)g($3)g(p)h(})719 695 y(|)g(Factor)967
b({)53 b($1)h(})396 929 y(Factor)719 1045 y(:)g(int)1129
b({)53 b(\\p)h(->)f($1)h(})719 1162 y(|)g(var)1129 b({)53
b(\\p)h(->)f(case)g(lookup)g($1)g(p)h(of)2333 1278 y(Nothing)e(->)i
(error)f("no)g(var")611 1395 y(Just)g(i)108 b(->)53 b(i)h(})719
1511 y(|)g('\(')f(Exp)g('\)')699 b({)53 b($2)h(})396
1741 y Fi(The)25 b(v)n(alue)f(of)h(each)h(production)d(is)i(a)g
(function)f(from)g(an)h(en)l(vironment)f Ff(p)g Fi(to)h(a)g(v)n(alue.)f
(When)396 1870 y(parsing)g(a)i Fe(let)e Fi(construct,)g(we)h(e)o(xtend)
f(the)h(en)l(vironment)e(with)h(the)h(ne)n(w)f(binding)g(to)g(\002nd)h
(the)396 2000 y(v)n(alue)f(of)h(the)g(body)-6 b(,)24
b(and)g(the)h(rule)g(for)g Fe(var)f Fi(looks)g(up)h(its)f(v)n(alue)g
(in)g(the)h(en)l(vironment.)e(There')-5 b(s)396 2129
y(something)23 b(you)i(can')n(t)g(do)f(in)h Fe(yacc)f
Fi(:-\))-2 2631 y Fk(2.2.)47 b(P)-5 b(ar)m(sing)47 b(sequences)396
2847 y Fi(A)25 b(common)f(feature)h(in)g(grammars)f(is)g(a)h
Ff(sequence)g Fi(of)g(a)g(particular)g(syntactic)f(element.)g(In)396
2977 y(EBNF)-8 b(,)26 b(we')-5 b(d)25 b(write)f(something)g(lik)o(e)g
Fe(n+)g Fi(to)h(represent)g(a)g(sequence)g(of)g(one)g(or)g(more)f
Fe(n)p Fi(s,)h(and)f Fe(n*)396 3106 y Fi(for)h(zero)h(or)f(more.)f
(Happ)o(y)h(doesn')n(t)f(support)g(this)g(syntax)g(e)o(xplicitly)-6
b(,)22 b(b)n(ut)i(you)h(can)g(de\002ne)g(the)396 3236
y(equi)n(v)n(alent)e(sequences)i(using)f(simple)f(productions.)396
3415 y(F)o(or)i(e)o(xample,)f(the)h(grammar)f(for)h(Happ)o(y)g(itself)f
(contains)g(a)h(rule)g(lik)o(e)f(this:)396 3631 y Fe(prods)53
b(:)h(prod)1021 b({)54 b([$1])f(})719 3748 y(|)h(prods)e(prod)699
b({)54 b($2)f(:)h($1)f(})396 3977 y Fi(In)24 b(other)g(w)o(ords,)g(a)g
(sequence)g(of)g(productions)f(is)g(either)h(a)h(single)e(production,)g
(or)h(a)g(sequence)g(of)396 4106 y(productions)g(follo)n(wed)f(by)i(a)g
(single)f(production.)f(This)h(recursi)n(v)o(e)g(rule)h(de\002nes)g(a)g
(sequence)g(of)396 4236 y(one)g(or)g(more)g(productions.)396
4415 y(One)g(thing)f(to)g(note)h(about)f(this)g(rule)h(is)f(that)g(we)h
(used)g Ff(left)f(r)l(ecur)o(sion)g Fi(to)h(de\002ne)g(it)f(-)i(we)f
(could)396 4545 y(ha)n(v)o(e)g(written)f(it)g(lik)o(e)h(this:)396
4761 y Fe(prods)53 b(:)h(prod)967 b({)54 b([$1])f(})719
4877 y(|)h(prod)f(prods)644 b({)54 b($1)f(:)h($2)f(})p
Black -2 5278 a Ff(14)p Black eop
%%Page: 15 15
15 14 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(The)h(only)f(reason)h(we)g(used)g(left)f(recursion)h
(is)f(that)h(Happ)o(y)f(is)h(more)f(ef)n(\002cient)h(at)g(parsing)396
708 y(left-recursi)n(v)o(e)f(rules;)h(the)o(y)f(result)g(in)g(a)h
(constant)f(stack-space)h(parser)l(,)h(whereas)f(right-recursi)n(v)o(e)
396 838 y(rules)g(require)g(stack)g(space)g(proportional)e(to)i(the)f
(length)g(of)h(the)g(list)e(being)i(parsed.)g(This)f(can)h(be)396
967 y(e)o(xtremely)f(important)f(where)j(long)e(sequences)h(are)g(in)l
(v)n(olv)o(ed,)e(for)i(instance)g(in)f(automatically)396
1097 y(generated)h(output.)f(F)o(or)h(e)o(xample,)f(the)g(parser)h(in)g
(GHC)g(used)g(to)f(use)h(right-recursion)f(to)g(parse)396
1226 y(lists,)g(and)g(as)h(a)g(result)g(it)f(f)o(ailed)h(to)f(parse)h
(some)g(Happ)o(y-generated)f(modules)g(due)h(to)f(running)396
1356 y(out)g(of)h(stack)g(space!)396 1535 y(One)g(implication)e(of)i
(using)f(left)g(recursion)h(is)f(that)h(the)f(resulting)g(list)g(comes)
g(out)g(re)n(v)o(ersed,)h(and)396 1665 y(you)g(ha)n(v)o(e)f(to)h(re)n
(v)o(erse)f(it)g(again)h(to)f(get)h(it)f(in)g(the)h(original)f(order)-5
b(.)24 b(T)-8 b(ak)o(e)25 b(a)h(look)e(at)g(the)h(Happ)o(y)396
1794 y(grammar)g(for)g(Hask)o(ell)f(for)h(man)o(y)f(e)o(xamples)g(of)h
(this.)396 1974 y(P)o(arsing)g(sequences)f(of)h(zero)h(or)e(more)h
(elements)f(requires)h(a)g(tri)n(vial)f(change)h(to)f(the)h(abo)o(v)o
(e)396 2103 y(pattern:)396 2319 y Fe(prods)53 b(:)h({-)f(empty)g(-})591
b({)54 b([])f(})719 2436 y(|)h(prods)e(prod)645 b({)54
b($2)f(:)h($1)f(})396 2665 y Fi(Y)-10 b(es)25 b(-)g(empty)f
(productions)g(are)h(allo)n(wed.)f(The)h(normal)f(con)l(v)o(ention)f
(is)h(to)h(include)f(the)h(comment)396 2795 y Fe({-)54
b(empty)e(-})25 b Fi(to)f(mak)o(e)h(it)f(more)h(ob)o(vious)e(to)h(a)h
(reader)h(of)f(the)g(code)g(what')-5 b(s)24 b(going)g(on.)-2
3188 y Fb(2.2.1.)39 b(Sequences)e(with)i(separator)n(s)396
3390 y Fi(A)25 b(common)f(type)g(of)h(sequence)g(is)f(one)h(with)f(a)h
Ff(separ)o(ator)r Fi(:)e(for)i(instance)g(function)f(bodies)g(in)g(C)
396 3519 y(consist)g(of)h(statements)e(separated)i(by)g(semicolons.)e
(T)-8 b(o)25 b(parse)g(this)f(kind)g(of)h(sequence)g(we)g(use)f(a)396
3649 y(production)g(lik)o(e)g(this:)396 3865 y Fe(stmts)53
b(:)h(stmt)1021 b({)54 b([$1])f(})719 3981 y(|)h(stmts)e(';')i(stmt)483
b({)54 b($3)f(:)h($1)f(})396 4210 y Fi(If)26 b(the)e
Fe(;)h Fi(is)f(to)h(be)g(a)g Ff(terminator)g Fi(rather)g(than)g(a)g
(separator)g(\(i.e.)g(there)g(should)e(be)i(one)g(follo)n(wing)396
4340 y(each)h(statement\),)e(we)h(can)g(remo)o(v)o(e)e(the)i(semicolon)
f(from)g(the)h(abo)o(v)o(e)f(rule)g(and)h(rede\002ne)h
Fe(stmt)396 4470 y Fi(as)396 4686 y Fe(stmt)53 b(:)h(stmt1)f(';')752
b({)54 b($1)f(})p Black 3784 5278 a Ff(15)p Black eop
%%Page: 16 16
16 15 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(where)i Fe(stmt1)d Fi(is)i(the)f(real)i
(de\002nition)e(of)g(statements.)396 758 y(W)-8 b(e)25
b(might)f(lik)o(e)g(to)h(allo)n(w)e(e)o(xtra)i(semicolons)e(between)i
(statements,)f(to)g(be)h(a)g(bit)f(more)h(liberal)f(in)396
888 y(what)h(we)g(allo)n(w)f(as)h(le)o(gal)e(syntax.)h(W)-8
b(e)25 b(probably)f(just)g(w)o(ant)h(the)f(parser)i(to)e(ignore)h
(these)f(e)o(xtra)396 1017 y(semicolons,)f(and)i(not)f(generate)i(a)f
(\223null)f(statement\224)g(v)n(alue)g(or)h(something.)e(The)i(follo)n
(wing)e(rule)396 1147 y(parses)i(a)g(sequence)g(or)g(zero)h(or)e(more)h
(statements)f(separated)h(by)f(semicolons,)f(in)i(which)f(the)396
1276 y(statements)g(may)g(be)h(empty:)396 1492 y Fe(stmts)53
b(:)h(stmts)e(';')i(stmt)537 b({)53 b($3)h(:)f($1)h(})719
1609 y(|)g(stmts)e(';')807 b({)53 b($1)h(})719 1726 y(|)g(stmt)f({)g
([$1])g(})719 1842 y(|)h({-)f(empty)g(-})g({)h([])f(})396
2071 y Fi(P)o(arsing)25 b(sequences)f(of)h Ff(one)g Fi(or)g(more)g
(possibly)e(null)h(statements)f(is)h(left)h(as)g(an)g(e)o(x)o(ercise)f
(for)h(the)396 2201 y(reader)-5 b(...)-2 2803 y Fk(2.3.)47
b(Ambiguities)396 3018 y Fi(\(section)25 b(under)f(construction\))-2
3521 y Fk(2.4.)47 b(T)-10 b(ype)47 b(Signatures)396 3736
y Fi(Happ)o(y)25 b(allo)n(ws)e(you)i(to)f(include)g(type)h(signatures)f
(in)g(the)h(grammar)f(\002le)h(itself,)g(to)f(indicate)g(the)396
3866 y(type)h(of)g(each)g(production.)f(This)g(has)g(se)n(v)o(eral)g
(bene\002ts:)p Black 396 4145 a Fc(\225)p Black 97 w
Fi(Documentation:)f(including)g(types)h(in)h(the)f(grammar)h(helps)f
(to)g(document)g(the)h(grammar)f(for)496 4274 y(someone)g(else)h(\(and)
g(indeed)f(yourself\))h(reading)f(the)h(code.)p Black
396 4454 a Fc(\225)p Black 97 w Fi(Fixing)f(type)g(errors)i(in)e(the)h
(generated)g(module)f(can)h(become)g(slightly)d(easier)k(if)e(Happ)o(y)
h(has)496 4583 y(inserted)f(type)h(signatures)f(for)h(you.)f(This)g(is)
g(a)h(slightly)e(dubious)h(bene\002t,)h(since)f(type)h(errors)496
4713 y(in)f(the)h(generated)g(module)f(are)h(still)f(some)n(what)f(dif)
n(\002cult)h(to)h(\002nd.)p Black -2 5278 a Ff(16)p Black
eop
%%Page: 17 17
17 16 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black Black 396 579 a Fc(\225)p Black 97 w Fi(T)-8 b(ype)24
b(signatures)g(generally)h(help)f(the)h(Hask)o(ell)f(compiler)g(to)h
(compile)f(the)g(parser)i(f)o(aster)-5 b(.)496 708 y(This)24
b(is)g(important)g(when)g(really)h(lar)n(ge)g(grammar)g(\002les)g(are)g
(being)g(used.)396 888 y(The)g(syntax)f(for)h(type)g(signatures)f(in)g
(the)h(grammar)f(\002le)h(is)g(as)g(follo)n(ws:)396 1104
y Fe(stmts)161 b(::)53 b({)h([)f(Stmt)g(])h(})396 1221
y(stmts)161 b(:)53 b(stmts)g(stmt)860 b({)54 b($2)f(:)h($1)f(})396
1337 y(|)h(stmt)1183 b({)53 b([$1])g(})396 1566 y Fi(In)25
b(f)o(act,)g(you)g(can)g(lea)n(v)o(e)f(out)h(the)f(super\003uous)h
(occurrence)g(of)g Fe(stmts)p Fi(:)396 1782 y Fe(stmts)161
b(::)53 b({)h([)f(Stmt)g(])h(})396 1899 y(:)g(stmts)f(stmt)860
b({)53 b($2)h(:)f($1)h(})396 2016 y(|)g(stmt)1183 b({)53
b([$1])g(})396 2245 y Fi(Note)25 b(that)f(currently)-6
b(,)24 b(you)h(ha)n(v)o(e)f(to)g(include)h(type)f(signatures)g(for)h
Ff(all)f Fi(the)h(productions)e(in)i(the)396 2374 y(grammar)g(to)f
(bene\002t)h(from)g(the)g(second)f(and)h(third)f(points)f(abo)o(v)o(e.)
h(This)g(is)h(due)f(to)h(boring)396 2504 y(technical)g(reasons,)f(b)n
(ut)h(it)f(is)g(hoped)h(that)f(this)g(restriction)g(can)h(be)g(remo)o
(v)o(ed)e(in)i(the)f(future.)-2 3006 y Fk(2.5.)47 b(Monadic)h(P)-5
b(ar)m(ser)m(s)396 3222 y Fi(Happ)o(y)25 b(has)f(support)g(for)h
(threading)g(a)g(monad)f(through)g(the)g(generated)h(parser)-5
b(.)25 b(This)f(might)g(be)396 3351 y(useful)h(for)g(se)n(v)o(eral)f
(reasons:)p Black 396 3630 a Fc(\225)p Black 496 3809
a Fi(Handling)g(parse)h(errors)g(by)f(using)g(an)h(e)o(xception)f
(monad)g(\(see)h(Section)g(2.5.1\).)p Black 396 4039
a Fc(\225)p Black 496 4218 a Fi(K)n(eeping)f(track)h(of)g(line)f
(numbers)g(in)g(the)h(input)e(\002le,)j(for)f(e)o(xample)e(for)i(use)g
(in)f(error)i(messages)496 4347 y(\(see)f(Section)g(2.5.3\).)p
Black 396 4577 a Fc(\225)p Black 97 w Fi(Performing)f(IO)i(operations)d
(during)h(parsing.)p Black 3780 5278 a Ff(17)p Black
eop
%%Page: 18 18
18 17 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black Black 396 579 a Fc(\225)p Black 97 w Fi(P)o(arsing)g(languages)g
(with)g(conte)o(xt-dependencies)g(\(such)h(as)g(C\))g(require)g(some)f
(state)h(in)f(the)496 708 y(parser)-5 b(.)396 888 y(Adding)24
b(monadic)g(support)g(to)g(your)h(parser)g(couldn')n(t)f(be)h(simpler)
-5 b(.)23 b(Just)h(add)h(the)g(follo)n(wing)396 1017
y(directi)n(v)o(e)f(to)g(the)h(declaration)f(section)h(of)f(the)h
(grammar)g(\002le:)396 1233 y Fe(\045monad)53 b({)g(<type>)g(})h([)f({)
h(<then>)e(})i({)g(<return>)e(})h(])396 1463 y Fi(where)26
b Fe(<type>)d Fi(is)i(the)f(type)h(constructor)f(for)h(the)g(monad,)f
Fe(<then>)f Fi(is)i(the)f(bind)g(operation)g(of)396 1592
y(the)h(monad,)f(and)h Fe(<return>)e Fi(is)h(the)h(return)g(operation.)
f(If)h(you)f(lea)n(v)o(e)h(out)f(the)h(names)f(for)i(the)396
1722 y(bind)e(and)h(return)g(operations,)f(Happ)o(y)g(assumes)g(that)h
Fe(<type>)e Fi(is)i(an)g(instance)f(of)h(the)f(standard)396
1851 y(Hask)o(ell)h(type)f(class)h Fe(Monad)e Fi(and)i(uses)g(the)f(o)o
(v)o(erloaded)g(names)g(for)h(the)g(bind)f(and)h(return)396
1981 y(operations.)396 2160 y(When)g(this)f(declaration)g(is)h
(included)f(in)g(the)h(grammar)l(,)f(Happ)o(y)h(mak)o(es)f(a)h(couple)g
(of)g(changes)g(to)396 2289 y(the)g(generated)g(parser:)g(the)g(types)f
(of)h(the)f(main)h(parser)g(function)f(and)h Fe(happyError)e
Fi(become)396 2419 y Fe([Token])53 b(->)g(P)h(a)24 b
Fi(where)i Fe(P)e Fi(is)h(the)f(monad)g(type)h(constructor)l(,)f(and)h
Fe(a)f Fi(is)h(the)f(type)h(of)g(the)f(top)396 2549 y(production.)g(In)
h(other)f(w)o(ords,)h(Happ)o(y)f(adds)h(an)g(application)e(of)i(the)g
Fe(<return>)e Fi(operation)396 2678 y(de\002ned)i(in)g(the)g
(declaration)f(abo)o(v)o(e,)g(around)g(the)h(result)f(of)h(the)g
(parser)g(\()p Fe(happyError)e Fi(is)396 2808 y(af)n(fected)i(because)h
(it)e(must)g(ha)n(v)o(e)g(the)h(same)f(return)h(type)g(as)g(the)f
(parser\).)i(And)e(that')-5 b(s)24 b(all)g(it)h(does.)396
2987 y(This)f(still)g(isn')n(t)g(v)o(ery)g(useful:)h(all)f(you)g(can)i
(do)e(is)g(return)h(something)e(of)i(monadic)f(type)h(from)396
3116 y Fe(happyError)p Fi(.)e(Ho)n(w)h(do)h(you)f(specify)h(that)f(the)
h(productions)e(can)i(also)g(ha)n(v)o(e)f(type)h Fe(P)53
b(a)p Fi(?)25 b(Most)396 3246 y(of)g(the)g(time,)f(you)g(don')n(t)h(w)o
(ant)f(a)h(production)f(to)g(ha)n(v)o(e)h(this)f(type:)g(you')-5
b(d)24 b(ha)n(v)o(e)h(to)f(write)h(e)o(xplicit)396 3375
y Fe(returnP)p Fi(s)f(e)n(v)o(erywhere.)g(Ho)n(we)n(v)o(er)l(,)f(there)
j(may)e(be)h(a)g(fe)n(w)g(rules)f(in)h(a)g(grammar)g(that)f(need)h(to)
396 3505 y(get)g(at)g(the)f(monad,)g(so)h(Happ)o(y)f(has)h(a)g(special)
g(syntax)f(for)h(monadic)f(actions:)396 3721 y Fe(n)108
b(:)f(t_1)53 b(...)g(t_n)538 b({\045)53 b(<expr>)g(})396
3950 y Fi(The)25 b Fe(\045)f Fi(in)h(the)f(action)g(indicates)g(that)h
(this)e(is)h(a)h(monadic)f(action,)g(with)g(type)h Fe(P)53
b(a)p Fi(,)25 b(where)g Fe(a)f Fi(is)g(the)396 4080 y(real)i(return)e
(type)h(of)g(the)f(production.)g(When)h(Happ)o(y)f(reduces)h(one)g(of)g
(these)g(rules,)f(it)g(e)n(v)n(aluates)396 4209 y(the)h(e)o(xpression)
396 4425 y Fe(<expr>)53 b(`then`)f(\\result)h(->)g(<continue)f
(parsing>)396 4655 y Fi(Happ)o(y)25 b(uses)f Fe(result)g
Fi(as)h(the)f(real)i(semantic)e(v)n(alue)g(of)h(the)g(production.)e
(During)h(parsing,)396 4784 y(se)n(v)o(eral)g(monadic)g(actions)g
(might)g(be)h(reduced,)g(resulting)f(in)g(a)h(sequence)g(lik)o(e)p
Black -2 5278 a Ff(18)p Black eop
%%Page: 19 19
19 18 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fe(<expr1>)53 b(`then`)f(\\r1)h(->)396
695 y(<expr2>)g(`then`)f(\\r2)h(->)396 812 y(...)396
929 y(return)g(<expr3>)396 1158 y Fi(The)25 b(monadic)f(actions)g(are)i
(performed)f(in)f(the)h(order)g(that)f(the)o(y)g(are)i
Ff(r)l(educed)s Fi(.)e(If)i(we)f(consider)396 1287 y(the)g(parse)g(as)g
(a)g(tree,)g(then)g(reductions)f(happen)g(in)h(a)g(depth-\002rst)f
(left-to-right)g(manner)-5 b(.)24 b(The)396 1417 y(great)h(thing)f
(about)g(adding)g(a)i(monad)e(to)g(your)h(parser)g(is)f(that)h(it)f
(doesn')n(t)g(impose)g(an)o(y)396 1546 y(performance)h(o)o(v)o(erhead)f
(for)g(normal)g(reductions)f(-)i(only)e(the)h(monadic)g(ones)g(are)h
(translated)f(lik)o(e)396 1676 y(this.)396 1855 y(T)-8
b(ak)o(e)25 b(a)g(look)g(at)f(the)h(Hask)o(ell)f(parser)i(for)f(a)g
(good)f(illustration)f(of)i(ho)n(w)e(to)i(use)g(a)g(monad)f(in)g(your)
396 1985 y(parser:)h(it)g(contains)f(e)o(xamples)f(of)i(all)g(the)f
(principles)g(discussed)g(in)g(this)g(section,)g(namely)g(parse)396
2114 y(errors,)h(a)h(threaded)e(le)o(x)o(er)l(,)g(line/column)f
(numbers,)h(and)h(state)g(communication)d(between)j(the)396
2244 y(parser)h(and)e(le)o(x)o(er)-5 b(.)396 2423 y(The)24
b(follo)n(wing)e(sections)h(consider)h(a)g(couple)g(of)g(uses)g(for)g
(monadic)f(parsers,)h(and)g(describe)g(ho)n(w)396 2553
y(to)h(also)f(thread)h(the)g(monad)f(through)g(the)g(le)o(xical)g
(analyser)-5 b(.)-2 2946 y Fb(2.5.1.)39 b(Handling)e(P)l(ar)n(se)h(Err)
m(or)n(s)396 3147 y Fi(It')-5 b(s)24 b(not)h(v)o(ery)f(con)l(v)o
(enient)g(to)g(just)g(call)h Fe(error)f Fi(when)g(a)i(parse)f(error)g
(is)f(detected:)h(in)f(a)i(rob)n(ust)396 3277 y(setting,)e(you')-5
b(d)24 b(lik)o(e)g(the)h(program)g(to)f(reco)o(v)o(er)h(gracefully)f
(and)h(report)g(a)g(useful)f(error)i(message)396 3407
y(to)e(the)g(user)-5 b(.)24 b(Exceptions)f(\(of)i(which)f(errors)g(are)
h(a)g(special)f(case\))h(are)g(normally)e(implemented)g(in)396
3536 y(Hask)o(ell)i(by)f(using)g(an)h(e)o(xception)f(monad,)g
(something)f(lik)o(e:)396 3752 y Fe(data)53 b(E)h(a)f(=)h(Ok)f(a)h(|)g
(Failed)e(String)396 3985 y(thenE)h(::)g(E)h(a)g(->)f(\(a)g(->)h(E)f
(b\))h(->)f(E)h(b)396 4102 y(m)g(`thenE`)e(k)i(=)558
4218 y(case)f(m)g(of)773 4335 y(Ok)g(a)h(->)f(k)h(a)450
4452 y(Failed)f(e)g(->)h(Failed)e(e)396 4685 y(returnE)h(::)g(a)h(->)f
(E)h(a)396 4801 y(returnE)f(a)g(=)h(Ok)f(a)p Black 3784
5278 a Ff(19)p Black eop
%%Page: 20 20
20 19 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 695 a Fe(failE)53 b(::)g(String)g(->)g(E)h(a)396
812 y(failE)f(err)g(=)h(Failed)e(err)396 1045 y(catchE)h(::)g(E)h(a)f
(->)h(\(String)e(->)i(E)f(a\))h(->)f(E)h(a)396 1162 y(catchE)f(m)g(k)h
(=)558 1278 y(case)f(m)g(of)719 1395 y(Ok)g(a)h(->)f(OK)h(a)396
1511 y(Failed)f(e)g(->)h(k)f(e)396 1741 y Fi(This)24
b(monad)g(just)g(uses)h(a)g(string)f(as)h(the)f(error)i(type.)e(The)h
(functions)f Fe(thenE)g Fi(and)g Fe(returnE)g Fi(are)396
1870 y(the)h(usual)f(bind)g(and)h(return)g(operations)f(of)h(the)f
(monad,)g Fe(failE)g Fi(raises)h(an)g(error)l(,)g(and)g
Fe(catchE)396 2000 y Fi(is)g(a)g(combinator)e(for)j(handling)d(e)o
(xceptions.)396 2179 y(W)-8 b(e)25 b(can)h(add)e(this)g(monad)g(to)h
(the)f(parser)i(with)e(the)g(declaration)396 2395 y Fe(\045monad)53
b({)g(E)h(})g({)f(thenE)g(})h({)f(returnE)g(})396 2624
y Fi(No)n(w)-6 b(,)24 b(without)f(changing)h(the)h(grammar)l(,)f(we)h
(can)h(change)f(the)f(de\002nition)g(of)h Fe(happyError)e
Fi(and)396 2754 y(ha)n(v)o(e)i(something)e(sensible)h(happen)g(for)h(a)
h(parse)f(error:)396 2970 y Fe(happyError)52 b(tokens)h(=)g(failE)g
("Parse)g(error")396 3199 y Fi(The)25 b(parser)g(no)n(w)f(raises)h(an)g
(e)o(xception)f(in)g(the)h(monad)f(instead)g(of)h(bombing)e(out)h(on)h
(a)g(parse)396 3329 y(error)-5 b(.)396 3508 y(W)d(e)25
b(can)h(also)e(generate)h(errors)h(during)e(parsing.)g(There)h(are)h
(times)d(when)i(it)f(is)h(more)f(con)l(v)o(enient)396
3637 y(to)h(parse)g(a)g(more)g(general)g(language)f(than)h(that)f
(which)g(is)h(actually)f(intended,)g(and)h(check)g(it)396
3767 y(later)-5 b(.)25 b(An)f(e)o(xample)g(comes)h(from)f(Hask)o(ell,)g
(where)i(the)e(precedence)i(v)n(alues)e(in)h(in\002x)396
3896 y(declarations)g(must)e(be)i(between)g(0)g(and)g(9:)396
4113 y Fe(prec)53 b(::)h({)f(Int)g(})719 4229 y(:)h(int)214
b({\045)54 b(if)f($1)g(<)h(0)g(||)f($1)g(>)h(9)1257 4346
y(then)f(failE)g("Precedence)e(out)j(of)f(range")827
4462 y(else)g(returnE)f($1)396 4579 y(})396 4808 y Fi(The)25
b(monadic)f(action)g(allo)n(ws)g(the)h(check)g(to)f(be)h(placed)g(in)g
(the)f(parser)i(itself,)e(where)h(it)f(belongs.)p Black
-2 5278 a Ff(20)p Black eop
%%Page: 21 21
21 20 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black -2 597 a Fb(2.5.2.)39 b(Threaded)e(Le)n(x)o(er)n(s)396
799 y Fi(Happ)o(y)25 b(allo)n(ws)e(the)i(monad)f(concept)h(to)f(be)h(e)
o(xtended)f(to)h(the)f(le)o(xical)g(analyser)l(,)h(too.)f(This)g(has)
396 928 y(se)n(v)o(eral)g(useful)h(consequences:)p Black
396 1207 a Fc(\225)p Black 97 w Fi(Le)o(xical)f(errors)h(can)g(be)g
(treated)g(in)g(the)f(same)h(w)o(ay)g(as)g(parse)g(errors,)g(using)f
(an)h(e)o(xception)496 1337 y(monad.)p Black 396 1516
a Fc(\225)p Black 97 w Fi(Information)f(such)g(as)h(the)g(current)g
(\002le)g(and)g(line)f(number)g(can)i(be)e(communicated)g(between)496
1646 y(the)h(le)o(x)o(er)f(and)g(parser)-5 b(.)p Black
396 1825 a Fc(\225)p Black 97 w Fi(General)25 b(state)g(communication)d
(between)j(the)g(parser)g(and)g(le)o(x)o(er)f(-)h(for)g(e)o(xample,)496
1954 y(implementation)d(of)j(the)g(Hask)o(ell)f(layout)g(rule)h
(requires)g(this)f(kind)g(of)g(interaction.)p Black 396
2134 a Fc(\225)p Black 97 w Fi(IO)h(operations)f(can)h(be)g(performed)g
(in)f(the)h(le)o(x)o(er)f(-)h(this)f(could)g(be)h(useful)f(for)i(follo)
n(wing)496 2263 y(import/include)c(declarations)j(for)g(instance.)396
2443 y(A)g(monadic)f(le)o(x)o(er)g(is)h(requested)f(by)h(adding)f(the)g
(follo)n(wing)f(declaration)i(to)f(the)h(grammar)g(\002le:)396
2659 y Fe(\045lexer)53 b({)g(<lexer>)g(})g({)h(<eof>)f(})396
2888 y Fi(where)26 b Fe(<lexer>)d Fi(is)h(the)h(name)g(of)g(the)f(le)o
(xical)g(analyser)h(function,)f(and)h Fe(<eof>)f Fi(is)g(a)h(tok)o(en)f
(that)396 3017 y(is)h(to)f(be)h(treated)g(as)g(the)g(end)f(of)h
(\002le.)396 3197 y(When)g(using)f(a)h(monadic)f(le)o(x)o(er)l(,)g(the)
h(parser)g(no)f(longer)h(reads)g(a)g(list)f(of)h(tok)o(ens.)f(Instead,)
g(it)h(calls)396 3326 y(the)g(le)o(xical)f(analysis)g(function)g(for)h
(each)g(ne)n(w)g(tok)o(en)f(to)g(be)h(read.)h(This)e(has)g(the)h(side)f
(ef)n(fect)i(of)396 3456 y(eliminating)d(the)i(intermediate)f(list)f
(of)i(tok)o(ens,)f(which)h(is)f(a)h(slight)e(performance)j(win.)396
3635 y(The)f(type)g(of)f(the)h(main)f(parser)i(function)e(and)g
Fe(happyError)f Fi(is)i(no)n(w)e(just)h Fe(P)54 b(a)25
b Fi(-)g(the)f(input)g(is)396 3765 y(being)h(handled)f(completely)g
(within)f(the)i(monad.)396 3944 y(The)g(le)o(xical)f(analysis)g
(function)g(must)g(ha)n(v)o(e)g(the)h(follo)n(wing)e(type:)396
4160 y Fe(lexer)53 b(::)g(\(Token)g(->)g(P)h(a\))f(->)h(P)f(a)396
4389 y Fi(where)26 b Fe(P)e Fi(is)h(the)f(monad)g(type)h(constructor)f
(declared)h(with)f Fe(\045monad)p Fi(,)g(and)h Fe(a)f
Fi(can)i(be)f(replaced)g(by)396 4519 y(the)g(parser)g(return)g(type)f
(if)h(desired.)396 4698 y(Y)-11 b(ou)25 b(can)g(see)g(from)g(this)f
(type)g(that)g(the)h(le)o(x)o(er)f(tak)o(es)h(a)g Ff(continuation)d
Fi(as)j(an)g(ar)n(gument.)g(The)f(le)o(x)o(er)396 4828
y(is)h(to)f(\002nd)h(the)g(ne)o(xt)f(tok)o(en,)g(and)h(pass)f(it)g(to)h
(this)f(continuation)f(to)h(carry)i(on)e(with)g(the)h(parse.)p
Black 3784 5278 a Ff(21)p Black eop
%%Page: 22 22
22 21 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(Ob)o(viously)-6 b(,)22 b(we)j(need)g(to)g(k)o(eep)g
(track)g(of)g(the)f(input)g(in)g(the)h(monad)f(someho)n(w)-6
b(,)23 b(so)h(that)h(the)f(le)o(x)o(er)396 708 y(can)h(do)g(something)e
(dif)n(ferent)h(each)i(time)e(it')-5 b(s)24 b(called!)396
888 y(Let')-5 b(s)24 b(tak)o(e)h(the)g(e)o(xception)f(monad)g(abo)o(v)o
(e,)g(and)g(e)o(xtend)g(it)h(to)f(add)h(the)f(input)g(string)g(so)h
(that)f(we)396 1017 y(can)h(use)g(it)f(with)g(a)i(threaded)f(le)o(x)o
(er)-5 b(.)396 1233 y Fe(data)53 b(ParseResult)f(a)h(=)h(Ok)f(a)h(|)g
(Failed)e(String)396 1350 y(type)h(P)h(a)f(=)h(String)f(->)g
(ParseResult)f(a)396 1583 y(thenP)h(::)g(P)h(a)g(->)f(\(a)g(->)h(P)f
(b\))h(->)f(P)h(b)396 1700 y(m)g(`thenP`)e(k)i(=)f(\\s)h(->)558
1816 y(case)f(m)g(s)h(of)773 1933 y(Ok)f(a)h(->)f(k)h(a)f(s)450
2049 y(Failed)g(e)g(->)h(Failed)e(e)396 2283 y(returnP)h(::)g(a)h(->)f
(P)h(a)396 2399 y(returnP)f(a)g(=)h(\\s)f(->)h(Ok)f(a)396
2632 y(failP)g(::)g(String)g(->)g(P)h(a)396 2749 y(failP)f(err)g(=)h
(\\s)f(->)h(Failed)e(err)396 2982 y(catchP)h(::)g(P)h(a)f(->)h
(\(String)e(->)i(P)f(a\))h(->)f(P)h(a)396 3098 y(catchP)f(m)g(k)h(=)g
(\\s)f(->)558 3215 y(case)g(m)g(s)h(of)719 3332 y(Ok)f(a)h(->)f(OK)h(a)
396 3448 y(Failed)f(e)g(->)h(k)f(e)h(s)396 3677 y Fi(Notice)25
b(that)f(this)g(isn')n(t)g(a)h(real)h(state)e(monad)g(-)h(the)g(input)f
(string)g(just)f(gets)i(passed)f(around,)h(not)396 3807
y(returned.)g(Our)g(le)o(x)o(er)f(will)g(no)n(w)g(look)g(something)f
(lik)o(e)h(this:)396 4023 y Fe(lexer)53 b(::)g(\(Token)g(->)g(P)h(a\))f
(->)h(P)f(a)396 4140 y(lexer)g(cont)g(s)h(=)611 4256
y(...)g(lexical)e(analysis)g(code)h(...)611 4373 y(cont)g(token)g(s')
396 4602 y Fi(the)25 b(le)o(x)o(er)f(grabs)h(the)f(continuation)f(and)i
(the)g(input)f(string,)f(\002nds)i(the)g(ne)o(xt)f(tok)o(en)g
Fe(token)p Fi(,)g(and)396 4731 y(passes)h(it)f(together)g(with)g(the)h
(remaining)f(input)g(string)g Fe(s')g Fi(to)g(the)h(continuation.)p
Black -2 5278 a Ff(22)p Black eop
%%Page: 23 23
23 22 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(W)-8 b(e)25 b(can)h(no)n(w)e(indicate)g(le)o(xical)g
(errors)h(by)g(ignoring)e(the)i(continuation)e(and)i(calling)f
Fe(failP)396 708 y("error)53 b(message")f(s)25 b Fi(within)e(the)i(le)o
(x)o(er)f(\(don')n(t)h(for)n(get)g(to)f(pass)h(the)f(input)g(string)g
(to)g(mak)o(e)396 838 y(the)h(types)f(w)o(ork)h(out\).)396
1017 y(This)e(may)h(all)f(seem)h(a)g(bit)g(weird.)f(Why)-6
b(,)23 b(you)g(ask,)h(doesn')n(t)f(the)h(le)o(x)o(er)f(just)g(ha)n(v)o
(e)h(type)f Fe(P)54 b(Token)p Fi(?)396 1147 y(W)-8 b(ell,)25
b(the)f(decision)g(w)o(as)h(tak)o(en)g(to)f(use)h(a)g(continuation)e
(purely)i(for)g(performance)g(reasons.)g(If)396 1276
y(the)g(le)o(x)o(er)f(must)g(return)g(a)i(tok)o(en,)e(then)g(it)h
(turns)f(out)g(that)g(the)h(input)f(string)g(must)f(be)i(a)g(real)h
(state)396 1406 y(object,)f(and)f(the)h(monad)f(has)h(to)f(return)h(it)
f(as)h(well)g(as)g(pass)f(it)g(around.)h(If)g(you)f(w)o(ant)h(a)g(le)o
(x)o(er)f(of)396 1535 y(type)h Fe(P)53 b(Token)p Fi(,)24
b(then)h(just)e(de\002ne)j(a)f(wrapper)g(to)g(deal)g(with)f(the)g
(continuation:)396 1752 y Fe(lexwrap)53 b(::)g(\(Token)g(->)g(P)h(a\))f
(->)g(P)h(a)396 1868 y(lexwrap)f(cont)g(=)g(real_lexer)f(`thenP`)g
(\\token)h(->)g(cont)g(token)-2 2361 y Fb(2.5.3.)39 b(Line)f(Number)n
(s)396 2563 y Fi(Pre)n(vious)23 b(v)o(ersions)f(of)i(Happ)o(y)f(had)g
(a)h Fe(\045newline)e Fi(directi)n(v)o(e)g(that)h(enabled)g(simple)f
(line)h(numbers)396 2692 y(to)i(be)g(counted)f(by)g(the)h(parser)g(and)
g(referenced)h(in)f(the)f(actions.)h(W)-8 b(e)25 b(w)o(arned)g(you)f
(that)h(this)396 2822 y(f)o(acility)f(may)h(go)f(a)o(w)o(ay)h(and)g(be)
g(replaced)g(by)g(something)e(more)h(general,)h(well)g(guess)f(what?)h
(:-\))396 3001 y(Line)g(numbers)f(can)h(no)n(w)f(be)h(dealt)f(with)h
(quite)f(straightforw)o(ardly)f(using)h(a)h(monadic)396
3131 y(parser/le)o(x)o(er)f(combination.)f(Ok,)i(we)g(ha)n(v)o(e)f(to)h
(e)o(xtend)f(the)h(monad)f(a)h(bit)f(more:)396 3347 y
Fe(type)53 b(LineNumber)f(=)i(Int)396 3463 y(type)f(P)h(a)f(=)h(String)
f(->)g(LineNumber)f(->)h(ParseResult)f(a)396 3696 y(getLineNo)g(::)i(P)
f(LineNumber)396 3813 y(getLineNo)f(=)i(\\s)f(l)h(->)f(Ok)h(l)396
4042 y Fi(\(the)25 b(rest)g(of)g(the)f(functions)g(in)h(the)f(monad)g
(follo)n(w)g(by)g(just)g(adding)g(the)h(e)o(xtra)f(line)h(number)396
4172 y(ar)n(gument)g(in)f(the)h(same)f(w)o(ay)h(as)g(the)g(input)f
(string\).)f(Again,)h(the)h(line)f(number)h(is)f(just)g(passed)396
4301 y(do)n(wn,)g(not)g(returned:)h(this)f(is)g(OK)h(because)g(of)g
(the)f(continuation-based)g(le)o(x)o(er)g(that)g(can)h(change)396
4431 y(the)g(line)f(number)h(and)f(pass)h(the)f(ne)n(w)h(one)g(to)f
(the)h(continuation.)396 4610 y(The)g(le)o(x)o(er)f(can)h(no)n(w)f
(update)h(the)f(line)h(number)f(as)h(follo)n(ws:)396
4826 y Fe(lexer)53 b(cont)g(s)h(=)p Black 3784 5278 a
Ff(23)p Black eop
%%Page: 24 24
24 23 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 504 579 a Fe(case)53 b(s)g(of)665 695 y('\\n':s)107
b(->)g(\\line)53 b(->)g(lexer)g(cont)g(s)g(\(line)g(+)h(1\))665
812 y(...)f(rest)g(of)h(lexical)e(analysis)g(...)396
1041 y Fi(It')-5 b(s)24 b(as)h(simple)f(as)h(that.)f(T)-8
b(ak)o(e)25 b(a)g(look)f(at)h(Happ)o(y')-5 b(s)24 b(o)n(wn)g(parser)h
(if)g(you)g(ha)n(v)o(e)f(the)h(sources)f(lying)396 1171
y(around,)h(it)f(uses)g(a)i(monad)e(just)g(lik)o(e)g(the)h(one)f(abo)o
(v)o(e.)396 1350 y(Reporting)h(the)f(line)h(number)f(of)h(a)g(parse)g
(error)h(is)e(achie)n(v)o(ed)g(by)g(changing)h Fe(happyError)d
Fi(to)396 1480 y(look)i(something)f(lik)o(e)i(this:)396
1696 y Fe(happyError)52 b(::)h(P)h(a)396 1812 y(happyError)e(=)i
(getLineNo)e(`thenP`)g(\\line)h(->)1096 1929 y(failP)f(\(show)h(line)g
(++)h(":)f(parse)g(error"\))396 2158 y Fi(W)-8 b(e)25
b(can)h(also)e(get)h(hold)f(of)h(the)f(line)h(number)f(during)g
(parsing,)g(to)g(put)h(it)f(in)g(the)h(parsed)g(data)396
2288 y(structure)g(for)g(future)g(reference.)h(A)f(good)f(w)o(ay)h(to)f
(do)h(this)f(is)g(to)g(ha)n(v)o(e)h(a)g(production)f(in)g(the)396
2417 y(grammar)h(that)f(returns)h(the)f(current)h(line)g(number:)396
2633 y Fe(lineno)53 b(::)g({)h(LineNumber)e(})827 2750
y(:)h({-)h(empty)e(-})323 b({\045)53 b(getLineNo)f(})396
2979 y Fi(The)25 b(semantic)f(v)n(alue)g(of)h Fe(lineno)f
Fi(is)g(the)h(line)f(number)h(of)f(the)h(last)f(tok)o(en)h(read)g(-)g
(this)f(will)396 3108 y(al)o(w)o(ays)h(be)g(the)f(tok)o(en)h(directly)f
(follo)n(wing)f(the)h Fe(lineno)g Fi(symbol)f(in)i(the)g(grammar)l(,)f
(since)396 3238 y(Happ)o(y)h(al)o(w)o(ays)f(k)o(eeps)h(one)g(lookahead)
f(tok)o(en)h(in)f(reserv)o(e.)-2 3681 y Fb(2.5.4.)39
b(Summar)q(y)396 3883 y Fi(The)25 b(types)f(of)h(v)n(arious)f
(functions)g(related)h(to)f(the)h(parser)g(are)h(dependent)e(on)g(what)
h(combination)396 4012 y(of)g Fe(\045monad)f Fi(and)h
Fe(\045lexer)e Fi(directi)n(v)o(es)h(are)h(present)g(in)f(the)h
(grammar)-5 b(.)24 b(F)o(or)h(reference,)h(we)f(list)396
4142 y(those)f(types)h(here.)p Black 396 4421 a Fc(\225)p
Black 97 w Fg(No)f Fa(\045monad)g Fg(or)h Fa(\045lexer)f
Fg(.)496 4587 y Fe(parse)322 b(::)53 b([Token])f(->)i(a)496
4704 y(happyError)e(::)h([Token])f(->)i(a)p Black -2
5278 a Ff(24)p Black eop
%%Page: 25 25
25 24 bop Black 2904 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black Black 396 579 a Fc(\225)p Black 97 w Fg(with)h
Fa(\045monad)f Fg(.)496 745 y Fe(parse)322 b(::)53 b([Token])f(->)i(P)f
(a)496 862 y(happyError)f(::)h([Token])f(->)i(P)f(a)p
Black 396 1091 a Fc(\225)p Black 97 w Fg(with)25 b Fa(\045lexer)f
Fg(.)496 1257 y Fe(parse)322 b(::)53 b(T)h(a)496 1374
y(happyError)e(::)h(T)h(a)496 1490 y(lexer)322 b(::)53
b(\(Token)g(->)g(T)h(a\))f(->)g(T)h(a)396 1670 y Fi(where)26
b(the)e(type)h(constructor)f Fe(T)g Fi(is)h(whate)n(v)o(er)f(you)g(w)o
(ant)h(\(usually)f Fe(T)53 b(a)h(=)g(String)e(->)h(a)p
Fi(.)25 b(I'm)496 1799 y(not)f(sure)h(if)g(this)f(is)g(useful,)g(or)h
(e)n(v)o(en)f(if)h(it)f(w)o(orks)h(properly)-6 b(.)p
Black 396 1979 a Fc(\225)p Black 97 w Fg(with)25 b Fa(\045monad)f
Fg(and)h Fa(\045lexer)f Fg(.)496 2145 y Fe(parse)322
b(::)53 b(P)h(a)496 2262 y(happyError)e(::)h(P)h(a)496
2378 y(lexer)322 b(::)53 b(\(Token)g(->)g(P)h(a\))f(->)g(P)h(a)-2
3030 y Fk(2.6.)47 b(The)h(Err)m(or)f(T)-14 b(oken)396
3246 y Fi(Happ)o(y)25 b(supports)e(a)i(limited)f(form)g(of)h(error)h
(reco)o(v)o(ery)-6 b(,)23 b(using)h(the)h(special)f(symbol)g
Fe(error)g Fi(in)g(a)396 3375 y(grammar)h(\002le.)g(When)g(Happ)o(y)f
(\002nds)h(a)g(parse)g(error)h(during)e(parsing,)g(it)g(automatically)f
(inserts)396 3505 y(the)i Fe(error)f Fi(symbol;)f(if)i(your)f(grammar)h
(deals)f(with)g Fe(error)g Fi(e)o(xplicitly)-6 b(,)22
b(then)j(it)f(can)h(detect)g(the)396 3634 y(error)h(and)f(carry)g(on.)
396 3813 y(F)o(or)g(e)o(xample,)f(the)h(Happ)o(y)f(grammar)h(for)g
(Hask)o(ell)f(uses)g(error)i(reco)o(v)o(ery)e(to)h(implement)e(Hask)o
(ell)396 3943 y(layout.)h(The)h(grammar)g(has)f(a)h(rule)g(that)g
(looks)e(lik)o(e)i(this:)396 4159 y Fe(close)53 b(:)h('}')967
b({)54 b(\(\))f(})719 4276 y(|)h(error)321 b({)54 b(\(\))f(})396
4505 y Fi(This)24 b(says)h(that)f(a)h(close)g(brace)g(in)g(a)g
(layout-indented)e(conte)o(xt)h(may)g(be)h(either)g(a)g(curly)g(brace)
396 4634 y(\(inserted)g(by)f(the)h(le)o(xical)f(analyser\),)h(or)g(a)g
(parse)g(error)-5 b(.)p Black 3784 5278 a Ff(25)p Black
eop
%%Page: 26 26
26 25 bop Black -2 67 a Ff(Chapter)24 b(2.)h(Using)f(Happy)p
Black 396 579 a Fi(This)g(rule)h(is)f(used)h(to)f(parse)i(e)o
(xpressions)d(lik)o(e)h Fe(let)53 b(x)h(=)g(e)f(in)h(e')p
Fi(:)24 b(the)g(layout)g(system)396 708 y(inserts)g(an)h(open)g(brace)g
(before)h Fe(x)p Fi(,)e(and)h(the)g(occurrence)h(of)f(the)f
Fe(in)h Fi(symbol)e(generates)i(a)g(parse)396 838 y(error)l(,)h(which)e
(is)g(interpreted)h(as)g(a)g(close)g(brace)g(by)g(the)f(abo)o(v)o(e)g
(rule.)396 1017 y(Note)h(for)g Fe(yacc)f Fi(users:)g(this)g(form)h(of)g
(error)g(reco)o(v)o(ery)g(is)f(strictly)g(more)g(limited)f(than)i(that)
396 1147 y(pro)o(vided)f(by)g Fe(yacc)p Fi(.)g(During)h(a)g(parse)g
(error)g(condition,)e Fe(yacc)i Fi(attempts)e(to)i(discard)f(states)g
(and)396 1276 y(tok)o(ens)g(in)h(order)g(to)f(get)h(back)g(into)f(a)h
(state)f(where)i(parsing)e(may)g(continue;)g(Happ)o(y)h(doesn')n(t)f
(do)396 1406 y(this.)g(The)h(reason)g(is)f(that)g(normal)h
Fe(yacc)f Fi(error)h(reco)o(v)o(ery)g(is)f(notoriously)f(hard)i(to)f
(describe,)h(and)396 1535 y(the)g(semantics)f(depend)g(hea)n(vily)h(on)
f(the)h(w)o(orkings)e(of)i(a)h(shift-reduce)e(parser)-5
b(.)25 b(Furthermore,)396 1665 y(dif)n(ferent)g(implementations)d(of)j
Fe(yacc)f Fi(appear)h(to)g(implement)e(error)i(reco)o(v)o(ery)g(dif)n
(ferently)-6 b(.)396 1794 y(Happ)o(y')h(s)24 b(limited)f(error)j(reco)o
(v)o(ery)e(on)h(the)g(other)f(hand)h(is)f(well-de\002ned,)h(as)g(is)f
(just)g(suf)n(\002cient)g(to)396 1924 y(implement)f(the)i(Hask)o(ell)f
(layout)g(rule)h(\(which)g(is)f(why)g(it)g(w)o(as)h(added)g(in)f(the)h
(\002rst)g(place\).)p Black -2 5278 a Ff(26)p Black eop
%%Page: 27 27
27 26 bop Black Black -2 647 a Fh(Chapter)58 b(3.)f(In)-8
b(v)i(oking)59 b(Happ)m(y)396 944 y Fi(An)25 b(in)l(v)n(ocation)e(of)i
(Happ)o(y)g(has)g(the)f(follo)n(wing)f(syntax:)396 1160
y Fe(happy)53 b([)h(options)e(])i(<filename>)d([)j(options)e(])396
1389 y Fi(All)24 b(the)h(command)f(line)g(options)g(are)h(optional)f
(\(!\))h(and)g(may)f(occur)h(either)g(before)h(or)e(after)i(the)396
1519 y(input)e(\002le)h(name.)396 1698 y(There)g(are)h(tw)o(o)e(types)h
(of)g(grammar)f(\002les,)h Fe(file.y)f Fi(and)g Fe(file.ly)p
Fi(,)g(with)g(the)g(latter)h(observing)396 1828 y(the)g(re)n(v)o(erse)f
(comment)g(bird)h(track)g(con)l(v)o(ention)e(\(i.e.)i(each)g(code)g
(line)f(must)g(be)o(gin)g(with)g('>'\).)396 1957 y(The)h(e)o(xamples)f
(distrib)n(uted)f(with)h(Happ)o(y)g(are)i(all)f(of)f(the)h(.ly)f(form.)
396 2136 y(Ca)n(v)o(eat:)h(When)g(using)f(hbc)g(\(Chalmers)h(Hask)o
(ell\))g(the)f(command)g(ar)n(gument)h(structure)f(is)396
2266 y(slightly)f(dif)n(ferent.)h(This)h(is)f(because)h(the)g(hbc)g
(run)f(time)g(system)g(tak)o(es)h(some)f(\003ags)h(as)g(its)f(o)n(wn)
396 2396 y(\(for)i(setting)d(things)h(lik)o(e)g(the)h(heap)g(size,)f
(etc\).)h(This)g(problem)e(can)j(be)f(circumv)o(ented)e(by)i(adding)396
2525 y(a)g(single)f Fe(-)h Fi(to)f(your)h(command)f(line.)g(So)h(when)g
(using)f(a)h(hbc)g(generated)g(v)o(ersion)e(of)i(Happ)o(y,)g(the)396
2655 y(ar)n(gument)g(structure)f(is:)396 2871 y Fe(happy)53
b(-)h([)f(options)g(])g(<filename>)f([)i(options)e(])396
3100 y Fi(Pedantic)25 b(programmers)f(can)i(either)e(use)h(aliases)g
(or)f(a)i(short)e(shell)g(wrapper)h(to)g(automatically)396
3229 y(add)g(the)g Fe(-)p Fi(,)f(along)h(with)f(an)o(y)g(required)h
(run)f(time)g(system)g(ar)n(guments)g(\(Or)h(just)f(use)h(GHC)g(to)396
3359 y(compile)f(Happ)o(y!\).)396 3538 y(The)h(\003ags)g(accepted)h(by)
e(Happ)o(y)h(are)g(as)g(follo)n(ws:)396 3867 y Fe(-a)54
b(|)f(-arrays)p Black Black 596 4226 a Fi(Instructs)24
b(Happ)o(y)g(to)g(generate)i(a)f(parser)g(using)f(an)h(array-based)h
(shift)e(reduce)h(parser)-5 b(.)596 4355 y(Currently)24
b(this)g(generates)h(slo)n(wer)f(parsers)h(for)g(tw)o(o)g(reasons:)f
(standard)h(Hask)o(ell)f(arrays)596 4485 y(are)h(surrounded)f(by)h(o)o
(v)o(erloading)e(and)h(bounds-checking)g(which)g(mak)o(es)h(lookup)e
(quite)596 4614 y(e)o(xpensi)n(v)o(e,)f(and)j(secondly)f(current)h
(compilers)f(don')n(t)g(kno)n(w)g(ho)n(w)g(to)h(generate)g(static)596
4744 y(objects)f(\(i.e.)g(the)o(y)g(generate)i(the)e(code)h(which)g(b)n
(uilds)e(the)i(array)h(at)e(run-time\).)p Black 3780
5278 a Ff(27)p Black eop
%%Page: 28 28
28 27 bop Black -2 67 a Ff(Chapter)24 b(3.)h(In)l(voking)f(Happy)p
Black 396 579 a Fe(-g)54 b(|)f(-ghc)p Black Black 596
938 a Fi(Instructs)24 b(Happ)o(y)g(to)g(generate)i(a)f(parser)g(that)g
(uses)f(ghc-speci\002c)h(e)o(xtensions)e(to)i(obtain)596
1067 y(f)o(aster)g(code.)g(When)f(compiling)f(the)i(resulting)f(Hask)o
(ell)g(module,)g(remember)g(to)h(add)g(the)596 1197 y(declaration)f
Fe(import)53 b(GlaExts)23 b Fi(to)i(the)f(module)g(header)-5
b(.)396 1525 y Fe(-c)54 b(|)f(-coerce)p Black Black 596
1884 a Fi(Use)24 b(GHC')-5 b(s)25 b Fe(unsafeCoerce#)d
Fi(e)o(xtension)i(to)g(generate)h(smaller)g(f)o(aster)g(parsers.)g(One)
596 2014 y(dra)o(wback)f(is)h(that)f(some)g(type)h(safety)f(is)h(lost,)
e(which)i(means)f(that)h(a)g(parser)g(generated)596 2143
y(with)f Fe(-c)g Fi(may)h(compile)e(\002ne)j(b)n(ut)e(crash)h(at)g
(run-time.)f(Be)h(sure)g(to)g(compile)f(your)g(grammar)596
2273 y(without)f Fe(-c)h Fi(\002rst)h(to)g(ensure)g(it)f(is)g
(type-correct.)596 2452 y(This)g(option)f(quite)h(a)h(signi\002cant)f
(ef)n(fect)i(on)e(the)h(performance)g(of)g(the)g(resulting)e(parser)l
(,)596 2581 y(b)n(ut)h(remember)h(that)f(parsers)h(generated)g(this)f
(w)o(ay)h(can)g(only)f(be)h(compiled)f(by)g(GHC)h(3.02)596
2711 y(and)f(abo)o(v)o(e.)g(This)g(option)g(may)g(only)g(be)h(used)g
(in)f(conjuction)g(with)g Fe(-g)p Fi(.)396 3040 y Fe(-i[<filename>])51
b(|)j(-info[=<filename>])p Black Black 596 3398 a Fi(Directs)24
b(Happ)o(y)h(to)f(produce)h(an)g(info)f(\002le)h(containing)f(detailed)
g(information)g(about)g(the)596 3528 y(grammar)l(,)g(parser)h(states,)f
(parser)i(actions,)e(and)h(con\003icts.)f(Info)h(\002les)g(are)g(vital)
f(during)g(the)596 3657 y(deb)n(ugging)f(of)i(grammars.)f(The)h
(\002lename)g(ar)n(gument)f(is)h(optional,)e(and)i(if)g(omitted)e(the)
596 3787 y(info)h(\002le)h(will)f(be)h(written)f(to)h
Fe(<file>.info)d Fi(\(where)k Fe(<file>)p Fi(;)d(is)h(the)h(input)f
(\002le)h(name)596 3916 y(with)f(an)o(y)g(e)o(xtension)f(remo)o(v)o
(ed\).)396 4245 y Fe(-o)54 b(<filename>)d(|)j(-outfile=<filename>)p
Black Black 596 4424 a Fi(Speci\002es)25 b(the)f(destination)f(of)h
(the)g(generated)h(parser)g(module.)e(If)i(omitted,)e(the)h(parser)h
(will)596 4554 y(be)f(placed)h(in)g Fe(<file>.hs)p Fi(,)e(where)i
Fe(<file>)f Fi(is)g(the)h(name)f(of)h(the)g(input)f(\002le)h(with)f(an)
o(y)596 4684 y(e)o(xtension)f(remo)o(v)o(ed.)p Black
-2 5278 a Ff(28)p Black eop
%%Page: 29 29
29 28 bop Black 2797 67 a Ff(Chapter)24 b(3.)h(In)l(voking)g(Happy)p
Black 396 579 a Fe(-m)54 b(<name>)e(|)i(-magic-name=<name>)p
Black Black 620 758 a Fi(Happ)o(y)25 b(pre\002x)o(es)g(all)f(the)h
(symbols)e(it)h(uses)h(internally)f(with)g(either)g Fe(happy)g
Fi(or)h Fe(Happy)p Fi(.)f(T)-8 b(o)596 888 y(use)24 b(a)h(dif)n(ferent)
g(string,)f(for)h(e)o(xample)f(if)g(the)h(use)g(of)g
Fe(happy)e Fi(is)i(con\003icting)f(with)g(one)h(of)596
1017 y(your)f(o)n(wn)g(functions,)g(specify)g(the)h(pre\002x)g(using)f
(the)h Fe(-m)f Fi(option.)396 1296 y Fe(-v)54 b(|)f(-verbose)p
Black Black 596 1476 a Fi(Causes)24 b(Happ)o(y)g(to)f(be)i(more)f(v)o
(erbose.)f(At)h(the)g(moment)e(this)i(just)f(prints)g(out)g(the)h(cop)o
(yright)596 1605 y(message)g(and)h(has)f(no)h(ef)n(fect)g(on)g(an)o
(ything)e(else.)396 1884 y Fe(-t)54 b(<directory>)d(|)j(-template)e
(<directory>)p Black Black 596 2243 a Fi(Instructs)24
b(Happ)o(y)g(to)g(use)h(this)f(directory)h(when)f(looking)g(for)h
(template)f(\002les:)g(these)h(\002les)596 2372 y(contain)f(the)g
(static)h(code)g(that)f(Happ)o(y)g(includes)g(in)h(e)n(v)o(ery)f
(generated)h(parser)-5 b(.)25 b(Y)-11 b(ou)596 2502 y(shouldn')n(t)23
b(need)i(to)f(use)h(this)f(option)g(if)g(Happ)o(y)h(is)f(properly)h
(con\002gured)g(for)g(your)596 2631 y(computer)-5 b(.)396
2910 y(Note:)25 b(only)f(one)g(of)h(the)g(options)e Fe(-g)i
Fi(and)f Fe(-a)h Fi(may)f(be)h(gi)n(v)o(en)f(\(or)h(their)f(long)g(v)o
(ersions\).)g(There)h(is)396 3040 y(no)g(array-based)g(parser)h(with)e
(ghc)g(e)o(xtensions)f(yet,)i(b)n(ut)f(this)g(is)g(planned)h(for)g(a)g
(future)g(v)o(ersion.)p Black 3784 5278 a Ff(29)p Black
eop
%%Page: 30 30
30 29 bop Black Black -2 647 a Fh(Chapter)58 b(4.)f(Syntax)g(of)h
(Grammar)f(Files)396 944 y Fi(The)25 b(input)f(to)g(Happ)o(y)h(is)f(a)h
(te)o(xt)f(\002le)h(containing)f(the)g(grammar)h(of)g(the)g(language)f
(you)g(w)o(ant)h(to)396 1073 y(parse,)g(together)g(with)f(some)g
(annotations)f(that)i(help)f(the)h(parser)g(generator)g(mak)o(e)g(a)g
(le)o(gal)396 1203 y(Hask)o(ell)g(module)e(that)i(can)g(be)g(included)f
(in)g(your)h(program.)f(This)g(section)g(gi)n(v)o(es)g(the)g(e)o(xact)
396 1333 y(syntax)g(of)h(grammar)g(\002les.)396 1512
y(The)g(o)o(v)o(erall)f(format)g(of)h(the)g(grammar)f(\002le)h(is)g(gi)
n(v)o(en)e(belo)n(w:)396 1728 y Fe(<optional)52 b(module)h(header>)396
1845 y(<directives>)396 1961 y(\045\045)396 2078 y(<grammar>)396
2194 y(<optional)f(module)h(trailer>)396 2423 y Fi(If)26
b(the)e(name)h(of)g(the)f(grammar)h(\002le)g(ends)g(in)f
Fe(.ly)p Fi(,)g(then)h(it)f(is)g(assumed)g(to)h(be)g(a)g(literate)g
(script.)396 2553 y(All)f(lines)h(e)o(xcept)f(those)g(be)o(ginning)f
(with)h(a)h Fe(>)g Fi(will)f(be)h(ignored,)f(and)h(the)f
Fe(>)h Fi(will)f(be)h(stripped)396 2682 y(from)g(the)f(be)o(ginning)f
(of)i(all)g(the)f(code)h(lines.)f(There)i(must)d(be)i(a)g(blank)g(line)
f(between)h(each)g(code)396 2812 y(section)f(\(lines)h(be)o(ginning)e
(with)h Fe(>)p Fi(\))h(and)f(comment)g(section.)g(Grammars)g(not)h
(using)e(the)i(literate)396 2941 y(notation)f(must)f(be)i(in)g(a)g
(\002le)g(with)f(the)h Fe(.y)f Fi(suf)n(\002x.)-2 3394
y Fk(4.1.)47 b(Le)m(xical)g(Rules)396 3610 y Fi(Identi\002ers)25
b(in)g(Happ)o(y)f(grammar)h(\002les)g(must)e(tak)o(e)i(the)g(follo)n
(wing)e(form)h(\(using)g(the)h(BNF)h(syntax)396 3739
y(from)f(the)f(Hask)o(ell)h(Report\):)827 3955 y Fe(id)322
b(::=)53 b(alpha)g({)h(idchar)e(})1365 4072 y(|)h(')h({)f(any{^'})g(|)g
(\\')h(})f(')1365 4188 y(|)g(")h({)f(any{^"})g(|)g(\\")h(})f(")827
4422 y(alpha)160 b(::=)53 b(A)h(|)f(B)h(|)g(...)f(|)g(Z)1365
4538 y(|)g(a)h(|)f(b)h(|)g(...)f(|)g(z)827 4771 y(idchar)106
b(::=)53 b(alpha)p Black 3784 5278 a Ff(30)p Black eop
%%Page: 31 31
31 30 bop Black 2428 67 a Ff(Chapter)25 b(4.)f(Syntax)h(of)f(Gr)o
(ammar)f(F)l(iles)p Black 1365 579 a Fe(|)53 b(0)h(|)f(1)h(|)g(...)f(|)
g(9)1365 695 y(|)g(_)-2 1248 y Fk(4.2.)47 b(Module)h(Header)396
1463 y Fi(This)24 b(section)g(is)h(optional,)e(b)n(ut)h(if)h(included)f
(tak)o(es)h(the)g(follo)n(wing)d(form:)396 1679 y Fe({)396
1796 y(<Haskell)52 b(module)h(header>)396 1913 y(})396
2142 y Fi(The)25 b(Hask)o(ell)f(module)g(header)i(contains)e(the)g
(module)g(name,)h(e)o(xports,)e(and)i(imports.)e(No)i(other)396
2271 y(code)g(is)g(allo)n(wed)e(in)i(the)g(header)n(\227this)f(is)g
(because)h(Happ)o(y)g(may)f(need)h(to)f(include)h(its)f(o)n(wn)396
2401 y Fe(import)g Fi(statements)f(directly)i(after)g(the)g(user)g
(de\002ned)g(header)-5 b(.)-2 2903 y Fk(4.3.)47 b(Directives)396
3119 y Fi(This)24 b(section)g(contains)g(a)i(number)e(of)h(lines)f(of)h
(the)f(form:)396 3335 y Fe(\045<directive)52 b(name>)h(<argument>)e
(...)396 3564 y Fi(The)25 b(statements)f(here)h(are)h(all)e
(annotations)f(to)i(help)f(Happ)o(y)h(generate)g(the)g(Hask)o(ell)f
(code)h(for)g(the)396 3694 y(grammar)-5 b(.)24 b(Some)h(of)g(them)f
(are)i(optional,)d(and)i(some)f(of)h(them)f(are)i(required.)-2
4087 y Fb(4.3.1.)39 b(T)-11 b(oken)37 b(T)-9 b(ype)396
4303 y Fe(\045tokentype)160 b({)53 b(<valid)g(Haskell)f(type>)h(})396
4533 y Fi(\(mandatory\))25 b(The)f Fe(\045tokentype)f
Fi(directi)n(v)o(e)h(gi)n(v)o(es)f(the)i(type)f(of)h(the)g(tok)o(ens)f
(passed)g(from)h(the)396 4662 y(le)o(xical)f(analyser)h(to)g(the)f
(parser)h(\(in)g(order)g(that)g(Happ)o(y)f(can)h(supply)f(types)g(for)h
(functions)f(and)396 4792 y(data)h(in)g(the)f(generated)h(parser\).)p
Black 3784 5278 a Ff(31)p Black eop
%%Page: 32 32
32 31 bop Black -2 67 a Ff(Chapter)24 b(4.)h(Syntax)f(of)h(Gr)o(ammar)e
(F)l(iles)p Black -2 597 a Fb(4.3.2.)39 b(T)-11 b(okens)396
814 y Fe(\045token)53 b(<name>)f({)i(<Haskell)e(pattern>)g(})773
930 y(<name>)g({)i(<Haskell)e(pattern>)g(})773 1047 y(...)396
1276 y Fi(\(mandatory\))25 b(The)f Fe(\045token)g Fi(directi)n(v)o(e)g
(is)g(used)h(to)f(tell)g(Happ)o(y)h(about)f(all)g(the)h(terminal)f
(symbols)396 1405 y(used)h(in)f(the)h(grammar)-5 b(.)24
b(Each)h(terminal)f(has)h(a)g(name,)f(by)h(which)f(it)h(is)f(referred)i
(to)e(in)h(the)396 1535 y(grammar)g(itself,)f(and)h(a)g(Hask)o(ell)f
(representation)g(enclosed)h(in)f(braces.)h(Each)h(of)e(the)h(patterns)
396 1664 y(must)f(be)h(of)g(the)f(same)h(type,)f(gi)n(v)o(en)g(by)g
(the)h Fe(\045tokentype)e Fi(directi)n(v)o(e.)396 1844
y(The)i(name)g(of)g(each)g(terminal)f(follo)n(ws)f(the)i(le)o(xical)f
(rules)h(for)g(Happ)o(y)f(identi\002ers)h(gi)n(v)o(en)e(abo)o(v)o(e.)
396 1973 y(There)i(are)h(no)f(le)o(xical)f(dif)n(ferences)h(between)f
(terminals)g(and)h(non-terminals)e(in)i(the)f(grammar)l(,)396
2103 y(so)h(it)f(is)g(recommended)h(that)f(you)g(stick)g(to)h(a)g(con)l
(v)o(ention;)e(for)i(e)o(xample)f(using)g(upper)g(case)396
2232 y(letters)h(for)g(terminals)e(and)i(lo)n(wer)f(case)i(for)f
(non-terminals,)e(or)i(vice-v)o(ersa.)396 2412 y(Happ)o(y)g(will)f(gi)n
(v)o(e)f(you)i(a)g(w)o(arning)f(if)h(you)f(try)h(to)f(use)h(the)g(same)
f(identi\002er)h(both)f(as)h(a)396 2541 y(non-terminal)f(and)h(a)g
(terminal,)f(or)g(introduce)h(an)g(identi\002er)f(which)h(is)f
(declared)h(as)g(neither)-5 b(.)396 2720 y(T)d(o)25 b(sa)n(v)o(e)f
(writing)g(lots)g(of)h(projection)f(functions)f(that)i(map)f(tok)o(ens)
g(to)h(their)f(components,)f(you)396 2850 y(can)i(include)g
Fe($$)f Fi(in)h(your)f(Hask)o(ell)g(pattern.)h(F)o(or)g(e)o(xample:)396
3066 y Fe(\045token)53 b(INT)g({)h(TokenInt)e($$)h(})773
3183 y(...)396 3412 y Fi(This)24 b(mak)o(es)h(the)f(semantic)g(v)n
(alue)h(of)g Fe(INT)f Fi(refer)i(to)e(the)h(\002rst)g(ar)n(gument)f(of)
h Fe(TokenInt)e Fi(rather)396 3541 y(than)i(the)f(whole)h(tok)o(en,)f
(eliminating)f(the)h(need)h(for)g(an)o(y)g(projection)f(function.)-2
3985 y Fb(4.3.3.)39 b(P)l(ar)n(ser)f(Name)396 4201 y
Fe(\045name)53 b(<Haskell)f(identifier>)396 4430 y Fi(\(optional\))24
b(The)h Fe(\045name)f Fi(directi)n(v)o(e)f(is)i(follo)n(wed)e(by)i(a)g
(v)n(alid)f(Hask)o(ell)g(identi\002er)l(,)g(and)h(gi)n(v)o(es)e(the)396
4560 y(name)i(of)g(the)g(top-le)n(v)o(el)e(parsing)h(function)g(in)g
(the)h(generated)g(parser)-5 b(.)25 b(This)f(is)g(the)h(only)f
(function)396 4689 y(that)h(needs)f(to)h(be)g(e)o(xported)f(from)g(a)h
(parser)h(module.)396 4869 y(If)g(the)e(parser)h(name)g(directi)n(v)o
(e)f(is)g(omitted,)f(it)i(def)o(aults)f(to)g Fe(happyParse)p
Fi(.)p Black -2 5278 a Ff(32)p Black eop
%%Page: 33 33
33 32 bop Black 2428 67 a Ff(Chapter)25 b(4.)f(Syntax)h(of)f(Gr)o
(ammar)f(F)l(iles)p Black -2 601 a Fb(4.3.4.)39 b(Monad)f(Directive)396
817 y Fe(\045monad)53 b({)g(<type>)g(})h({)f(<then>)g(})g({)h(<return>)
e(})396 1046 y Fi(\(optional\))24 b(The)h Fe(\045monad)f
Fi(directi)n(v)o(e)f(tak)o(es)i(three)g(ar)n(guments:)f(the)g(type)h
(constructor)f(of)h(the)396 1175 y(monad,)f(the)h Fe(then)f
Fi(\(or)h Fe(bind)p Fi(\))f(operation,)g(and)h(the)g
Fe(return)f Fi(\(or)h Fe(unit)p Fi(\))f(operation.)g(The)h(type)396
1305 y(constructor)f(can)i(be)f(an)o(y)f(type)g(with)g(kind)g
Fe(*)54 b(->)f(*)p Fi(.)396 1484 y(Monad)24 b(declarations)h(are)g
(described)g(in)f(more)h(detail)f(in)h(Section)f(2.5.)-2
1928 y Fb(4.3.5.)39 b(Le)n(xical)f(Anal)n(yser)396 2144
y Fe(\045lexer)53 b({)g(<lexer>)g(})g({)h(<eof>)f(})396
2373 y Fi(\(optional\))24 b(The)h Fe(\045lexer)f Fi(directi)n(v)o(e)f
(tak)o(es)i(tw)o(o)f(ar)n(guments:)g Fe(<lexer>)f Fi(is)i(the)f(name)h
(of)g(the)396 2503 y(le)o(xical)f(analyser)h(function,)f(and)h
Fe(<eof>)f Fi(is)g(a)h(tok)o(en)f(that)h(is)f(to)h(be)g(treated)f(as)h
(the)g(end)g(of)g(\002le.)396 2682 y(Le)o(x)o(er)g(declarations)f(are)h
(described)g(in)f(more)h(detail)f(in)h(Section)g(2.5.2.)-2
3284 y Fk(4.4.)47 b(Grammar)396 3500 y Fi(The)25 b(grammar)g(section)f
(comes)g(after)i(the)e(directi)n(v)o(es,)f(separated)j(from)e(them)g
(by)h(a)396 3629 y(double-percent)g(\()p Fe(\045\045)p
Fi(\))g(symbol.)e(This)h(section)g(contains)g(a)h(number)f(of)h
Ff(pr)l(oductions)p Fi(,)e(each)i(of)396 3759 y(which)g(de\002nes)g(a)g
(single)f(non-terminal.)f(Each)i(production)f(has)h(the)f(follo)n(wing)
f(syntax:)396 3975 y Fe(<non-terminal>)51 b([)j(::)f({)h(<type>)e(})i
(])827 4091 y(:)107 b(<id>)53 b(...)g({[\045])g(<expression>)f(})719
4208 y([)i(|)107 b(<id>)53 b(...)g({[\045])g(<expression>)f(})827
4324 y(...)h(])396 4554 y Fi(The)25 b(\002rst)g(line)f(gi)n(v)o(es)g
(the)g(non-terminal)g(to)g(be)h(de\002ned)g(by)g(the)g(production)e
(and)i(optionally)e(its)396 4683 y(type)i(\(type)f(signatures)g(for)h
(productions)f(are)h(discussed)f(in)g(Section)h(2.4\).)p
Black 3784 5278 a Ff(33)p Black eop
%%Page: 34 34
34 33 bop Black -2 67 a Ff(Chapter)24 b(4.)h(Syntax)f(of)h(Gr)o(ammar)e
(F)l(iles)p Black 396 579 a Fi(Each)i(production)f(has)h(at)f(least)h
(one,)g(and)f(possibly)f(man)o(y)h(right-hand)g(sides.)g(Each)h
(right-hand)396 708 y(side)g(consists)e(of)i(zero)g(or)g(more)g
(symbols)e(\(terminals)h(or)h(non-terminals\))e(and)i(a)g(Hask)o(ell)
396 838 y(e)o(xpression)f(enclosed)g(in)h(braces.)g(The)g(e)o
(xpression)e(represents)i(the)g(semantic)f(v)n(alue)g(of)h(the)396
967 y(non-terminal,)f(and)h(may)f(refer)i(to)e(the)h(semantic)f(v)n
(alues)g(of)h(the)g(symbols)e(in)h(the)h(right-hand)396
1097 y(side)g(using)e(the)i(meta-v)n(ariables)f Fe($1)53
b(...)h($n)p Fi(.)396 1276 y(Remember)25 b(that)g(all)f(the)h(e)o
(xpressions)e(for)i(a)g(production)f(must)g(ha)n(v)o(e)g(the)h(same)f
(type.)396 1456 y(A)h(semantic)f(v)n(alue)g(of)h(the)g(form)f
Fe({\045)54 b(...)f(})25 b Fi(is)f(a)h Ff(monadic)f(action)p
Fi(,)g(and)h(is)f(only)g(v)n(alid)g(when)396 1585 y(the)h(grammar)f
(\002le)i(contains)e(a)h Fe(\045monad)e Fi(directi)n(v)o(e)h(\(Section)
h(4.3.4\).)f(Monadic)g(actions)g(are)396 1715 y(discussed)g(in)g
(Section)h(2.5.)-2 2217 y Fk(4.5.)47 b(Module)h(T)-14
b(railer)396 2433 y Fi(The)25 b(module)f(trailer)h(is)f(optional,)f
(comes)i(right)f(at)h(the)f(end)h(of)g(the)g(grammar)f(\002le,)h(and)g
(tak)o(es)g(the)396 2562 y(same)g(form)f(as)h(the)g(module)f(header:)
396 2778 y Fe({)396 2895 y(<Haskell)52 b(code>)396 3011
y(})396 3241 y Fi(This)24 b(section)g(is)h(used)f(for)h(placing)g
(auxiliary)f(de\002nitions)f(that)i(need)g(to)f(be)h(in)f(the)h(same)g
(module)396 3370 y(as)g(the)g(parser)-5 b(.)25 b(In)f(small)g(parsers,)
h(it)f(often)h(contains)f(a)h(hand-written)f(le)o(xical)g(analyser)h
(too.)396 3500 y(There)g(is)g(no)f(restriction)g(on)h(what)f(can)i(be)f
(placed)f(in)h(the)g(module)e(trailer)l(,)i(and)g(an)o(y)f(code)h(in)
396 3629 y(there)g(is)g(copied)f(v)o(erbatim)g(into)g(the)g(generated)h
(parser)h(\002le.)p Black -2 5278 a Ff(34)p Black eop
%%Page: 35 35
35 34 bop Black Black -2 647 a Fh(Chapter)58 b(5.)f(Inf)l(o)h(Files)396
944 y Fi(\(section)25 b(under)f(construction\))p Black
3784 5278 a Ff(35)p Black eop
%%Page: 36 36
36 35 bop Black Black -2 647 a Fh(Chapter)58 b(6.)f(Tips)396
944 y Fi(This)24 b(section)g(contains)g(a)i(lot)e(of)h(accumulated)f
(lore)h(about)f(using)g(Happ)o(y.)-2 1397 y Fk(6.1.)47
b(P)-5 b(erf)m(ormance)46 b(Tips)396 1612 y Fi(Ho)n(w)24
b(to)h(mak)o(e)f(your)h(parser)g(go)g(f)o(aster:)p Black
396 1891 a Fc(\225)p Black 496 2070 a Fi(If)g(you)f(are)i(using)e(GHC,)
h(generate)g(parsers)g(using)f(the)h Fe(-g)f Fi(option,)g(and)h
(compile)e(them)i(using)496 2200 y(ghc)g(with)f(the)g
Fe(-fglasgow-exts)e Fi(option.)i(This)g(is)g(w)o(orth)h(about)f
(10-20\045.)g(Use)h(the)g Fe(-c)496 2329 y Fi(option:)e(this)h(is)g(w)o
(orth)h(at)g(least)f(another)h(10\045,)f(in)h(code)g(size,)f(e)o(x)o
(ecution)g(time)g(and)g(space)496 2459 y(usage.)p Black
396 2688 a Fc(\225)p Black 97 w Fi(The)h(le)o(xical)f(analyser)g(is)h
(usually)f(the)g(most)g(performance)h(critical)g(part)g(of)f(a)i
(parser)l(,)f(so)f(it')-5 b(s)496 2818 y(w)o(orth)24
b(spending)g(some)g(time)g(optimising)e(this.)i(Pro\002ling)h(tools)e
(are)j(essential)e(here.)h(In)g(really)496 2947 y(dire)g
(circumstances,)f(resort)h(to)f(some)g(of)h(the)g(hacks)g(that)f(are)h
(used)g(in)f(the)h(Glasgo)n(w)f(Hask)o(ell)496 3077 y(Compiler')-5
b(s)24 b(interf)o(ace-\002le)i(le)o(x)o(er)-5 b(.)p Black
396 3256 a Fc(\225)p Black 97 w Fi(Simplify)23 b(the)i(grammar)g(as)g
(much)f(as)h(possible,)e(as)i(this)f(reduces)h(the)g(number)f(of)h
(states)f(and)496 3385 y(reduction)g(rules)h(that)f(need)h(to)f(be)h
(applied.)p Black 396 3565 a Fc(\225)p Black 496 3744
a Fi(Use)g(left)f(recursion)h(rather)g(than)g(right)f(recursion)g
(where)n(v)o(er)h(possible.)e(While)i(not)f(strictly)g(a)496
3874 y(performance)h(issue,)f(this)g(af)n(fects)h(the)g(size)g(of)f
(the)h(parser)g(stack,)g(which)f(is)h(k)o(ept)f(on)h(the)f(heap)496
4003 y(and)h(thus)f(needs)g(to)h(be)g(garbage)f(collected.)-2
4555 y Fk(6.2.)47 b(Compilation-Time)h(Tips)p Black 3781
5348 a Ff(36)p Black eop
%%Page: 37 37
37 36 bop Black 3266 67 a Ff(Chapter)24 b(6.)h(T)-5 b(ips)p
Black 396 579 a Fi(W)d(e)25 b(ha)n(v)o(e)g(found)f(that)h(compiling)e
(parsers)i(generated)g(by)f(Happ)o(y)h(can)g(tak)o(e)g(a)g(lar)n(ge)g
(amount)f(of)396 708 y(time/memory)-6 b(,)22 b(so)j(here')-5
b(s)25 b(some)f(tips)g(on)g(making)g(things)g(more)g(sensible:)p
Black 396 987 a Fc(\225)p Black 97 w Fi(Include)g(as)h(little)f(code)h
(as)g(possible)e(in)i(the)f(module)g(trailer)-5 b(.)24
b(This)g(code)h(is)g(included)496 1117 y(v)o(erbatim)e(in)i(the)g
(generated)g(parser)l(,)g(so)f(if)h(an)o(y)f(of)h(it)g(can)g(go)f(in)h
(a)g(separate)g(module,)f(do)g(so.)p Black 396 1296 a
Fc(\225)p Black 496 1476 a Fi(Gi)n(v)o(e)f(type)i(signatures)f(for)h(e)
n(v)o(erything)e(\(see)i(Section)g(2.4.)f(This)g(is)h(reported)g(to)f
(impro)o(v)o(e)496 1605 y(things)f(by)i(about)f(50\045.)h(If)g(there)g
(is)f(a)h(type)g(signature)f(for)h(e)n(v)o(ery)f(single)g(non-terminal)
g(in)g(the)496 1735 y(grammar)l(,)g(then)h(Happ)o(y)f(automatically)g
(generates)h(type)f(signatures)g(for)h(most)f(functions)g(in)496
1864 y(the)h(parser)-5 b(.)p Black 396 2093 a Fc(\225)p
Black 97 w Fi(Simplify)23 b(the)i(grammar)g(as)g(much)f(as)h(possible)e
(\(applies)i(to)f(e)n(v)o(erything,)f(this)h(one\).)p
Black 396 2273 a Fc(\225)p Black 97 w Fi(Use)h(a)g(recent)g(v)o(ersion)
f(of)h(GHC.)g(V)-11 b(ersions)24 b(from)g(4.04)h(onw)o(ards)f(ha)n(v)o
(e)h(lo)n(wer)f(memory)496 2402 y(requirements)g(for)h(compiling)e
(Happ)o(y-generated)i(parsers.)p Black 396 2581 a Fc(\225)p
Black 97 w Fi(Using)f(Happ)o(y')-5 b(s)24 b Fe(-g)g Fi(option)g(when)g
(generating)h(parsers)g(to)f(be)h(compiled)f(with)g(GHC)h(will)496
2711 y(help)f(considerably)-6 b(.)-2 3213 y Fk(6.3.)47
b(Finding)h(T)-10 b(ype)48 b(Err)m(or)m(s)396 3429 y
Fi(Finding)24 b(type)h(errors)g(in)f(grammar)h(\002les)g(is)f
(inherently)g(dif)n(\002cult)g(because)h(the)g(code)g(for)396
3558 y(reductions)f(is)h(mo)o(v)o(ed)e(around)h(before)i(being)e
(placed)h(in)f(the)h(parser)-5 b(.)25 b(W)-8 b(e)25 b(currently)f(ha)n
(v)o(e)h(no)396 3688 y(w)o(ay)g(of)g(passing)f(the)g(original)g
(\002lename)h(and)g(line)f(numbers)g(to)h(the)g(Hask)o(ell)f(compiler)l
(,)g(so)g(there)396 3817 y(is)h(no)f(alternati)n(v)o(e)g(b)n(ut)g(to)g
(look)g(at)h(the)g(parser)g(and)g(match)f(the)h(code)g(to)f(the)h
(grammar)f(\002le.)i(An)396 3947 y(info)f(\002le)g(\(generated)g(by)g
(the)f Fe(-i)h Fi(option\))f(can)h(be)g(helpful)f(here.)396
4126 y(T)-8 b(ype)25 b(signature)f(sometimes)f(help)i(by)f(pinning)g
(do)n(wn)f(the)i(particular)g(error)g(to)g(the)f(place)h(where)396
4256 y(the)g(mistak)o(e)f(is)g(made,)h(not)f(half)h(w)o(ay)g(do)n(wn)e
(the)i(\002le.)g(F)o(or)g(each)g(production)f(in)g(the)h(grammar)l(,)
396 4385 y(there')-5 b(s)25 b(a)g(bit)f(of)h(code)g(in)f(the)h
(generated)g(\002le)g(that)g(looks)e(lik)o(e)i(this:)396
4601 y Fe(HappyAbsSyn<n>)51 b(\()j(E)f(\))p Black 3780
5278 a Ff(37)p Black eop
%%Page: 38 38
38 37 bop Black -2 67 a Ff(Chapter)24 b(6.)h(T)-5 b(ips)p
Black 396 579 a Fi(where)26 b Fe(E)e Fi(is)h(the)f(Hask)o(ell)h(e)o
(xpression)e(from)i(the)f(grammar)h(\002le)g(\(with)f
Fe($n)h Fi(replaced)g(by)396 708 y Fe(happy_var_n)p Fi(\).)e(If)i
(there)g(is)g(a)g(type)f(signature)g(for)i(this)d(production,)h(then)g
(Happ)o(y)h(will)f(ha)n(v)o(e)396 838 y(tak)o(en)h(it)f(into)f(account)
i(when)f(declaring)g(the)h(Happ)o(yAbsSyn)f(datatype,)g(and)g(errors)h
(in)f Fe(E)h Fi(will)e(be)396 967 y(caught)i(right)f(here.)h(Of)g
(course,)g(the)g(error)g(may)g(be)g(really)f(caused)h(by)g(incorrect)g
(use)f(of)h(one)g(of)396 1097 y(the)g Fe(happy_var_n)e
Fi(v)n(ariables.)396 1276 y(\(this)h(section)g(will)g(contain)h(more)f
(info)h(as)g(we)g(gain)f(e)o(xperience)g(with)g(creating)h(grammar)g
(\002les.)396 1406 y(Please)h(send)e(us)h(an)o(y)f(helpful)g(tips)g
(you)g(\002nd.\))-2 1908 y Fk(6.4.)47 b(Con\003ict)h(Tips)396
2124 y Fi(Con\003icts)25 b(arise)g(from)g(ambiguities)d(in)j(the)g
(grammar)-5 b(.)23 b(That)i(is,)f(some)g(input)g(sequences)h(may)396
2253 y(possess)f(more)h(than)f(one)h(parse.)g(Shift/reduce)g
(con\003icts)f(are)i(benign)e(in)g(the)h(sense)g(that)f(the)o(y)g(are)
396 2383 y(easily)h(resolv)o(ed)f(\(Happ)o(y)g(automatically)f(selects)
i(the)g(shift)f(action,)g(as)h(this)f(is)g(usually)g(the)396
2512 y(intended)g(one\).)h(Reduce/reduce)h(con\003icts)f(are)g(more)g
(serious.)f(A)h(reduce/reduce)g(con\003ict)396 2642 y(implies)f(that)g
(a)h(certain)g(sequence)g(of)g(tok)o(ens)f(on)h(the)f(input)g(can)h
(represent)g(more)g(than)f(one)396 2771 y(non-terminal,)g(and)h(the)f
(parser)h(is)g(uncertain)f(as)h(to)g(which)f(reduction)g(rule)h(to)g
(use.)f(It)h(will)f(select)396 2901 y(the)h(reduction)f(rule)h
(uppermost)e(in)i(the)g(grammar)f(\002le,)h(so)g(if)f(you)h(really)g
(must)e(ha)n(v)o(e)i(a)396 3030 y(reduce/reduce)h(con\003ict)f(you)f
(can)h(select)g(which)f(rule)h(will)f(be)h(used)g(by)f(putting)f(it)i
(\002rst)g(in)f(your)396 3160 y(grammar)h(\002le.)396
3339 y(It)g(is)f(usually)g(possible)g(to)g(remo)o(v)o(e)g(con\003icts)g
(from)h(the)f(grammar)l(,)h(b)n(ut)f(sometimes)f(this)h(is)h(at)f(the)
396 3469 y(e)o(xpense)h(of)f(clarity)h(and)g(simplicity)-6
b(.)22 b(Here)j(is)f(a)i(cut-do)n(wn)d(e)o(xample)h(from)h(the)f
(grammar)h(of)396 3598 y(Hask)o(ell)g(\(1.2\):)396 3814
y Fe(exp)269 b(:)53 b(exp)g(op)h(exp0)827 3931 y(|)f(exp0)396
4164 y(exp0)215 b(:)53 b(if)h(exp)f(then)g(exp)g(else)g(exp)827
4281 y(...)827 4397 y(|)g(atom)396 4630 y(atom)215 b(:)53
b(var)827 4747 y(|)g(integer)827 4863 y(|)g('\(')g(exp)h('\)')p
Black -2 5278 a Ff(38)p Black eop
%%Page: 39 39
39 38 bop Black 3266 67 a Ff(Chapter)24 b(6.)h(T)-5 b(ips)p
Black 827 579 a Fe(...)396 808 y Fi(This)24 b(grammar)h(has)g(a)g
(shift/reduce)f(con\003ict,)h(due)f(to)h(the)f(follo)n(wing)f
(ambiguity)-6 b(.)23 b(In)i(an)g(input)396 938 y(such)g(as)396
1154 y Fe(if)54 b(1)f(then)g(2)h(else)f(3)g(+)h(4)396
1383 y Fi(the)25 b(grammar)f(doesn')n(t)h(specify)g(whether)f(the)h
(parse)g(should)f(be)396 1599 y Fe(if)54 b(1)f(then)g(2)h(else)f(\(3)g
(+)h(4\))396 1828 y Fi(or)396 2044 y Fe(\(if)f(1)h(then)f(2)h(else)f
(3\))g(+)h(4)396 2274 y Fi(and)25 b(the)g(ambiguity)e(sho)n(ws)g(up)i
(as)g(a)g(shift/reduce)f(con\003ict)h(on)f(reading)h(the)g('op')f
(symbol.)g(In)396 2403 y(this)g(case,)h(the)g(\002rst)g(parse)g(is)f
(the)h(intended)f(one)h(\(the)g(')o(longest)f(parse')h(rule\),)g(which)
396 2533 y(corresponds)g(to)f(the)h(shift)f(action.)g(Remo)o(ving)g
(this)f(con\003ict)i(relies)g(on)f(noticing)g(that)g(the)396
2662 y(e)o(xpression)g(on)g(the)h(left-hand)g(side)f(of)h(an)g(in\002x)
f(operator)h(can')n(t)h(be)e(an)h Fe(exp0)g Fi(\(the)f(grammar)396
2792 y(pre)n(viously)e(said)i(otherwise,)f(b)n(ut)g(since)h(the)g
(con\003ict)f(w)o(as)h(resolv)o(ed)f(as)h(shift,)f(this)g(parse)h(w)o
(as)g(not)396 2921 y(allo)n(wed\).)g(W)-8 b(e)25 b(can)h(reformulate)e
(the)h Fe(exp)f Fi(rule)h(as:)396 3137 y Fe(exp)269 b(:)53
b(atom)g(op)h(exp)827 3254 y(|)f(exp0)396 3483 y Fi(and)25
b(this)f(remo)o(v)o(es)f(the)i(con\003ict,)g(b)n(ut)f(at)h(the)f(e)o
(xpense)h(of)g(some)f(stack)g(space)i(while)e(parsing)g(\(we)396
3613 y(turned)h(a)g(left-recursion)f(into)g(a)i(right-recursion\).)e
(There)h(are)g(alternati)n(v)o(es)f(using)396 3742 y(left-recursion,)h
(b)n(ut)f(the)o(y)g(all)g(in)l(v)n(olv)o(e)g(adding)g(e)o(xtra)g
(states)h(to)f(the)h(parser)l(,)g(so)f(most)396 3872
y(programmers)g(will)g(prefer)i(to)e(k)o(eep)h(the)g(con\003ict)g(in)f
(f)o(a)n(v)n(our)h(of)g(a)g(clearer)h(and)f(more)g(ef)n(\002cient)396
4001 y(parser)-5 b(.)-2 4395 y Fb(6.4.1.)39 b(LALR\(1\))e(par)n(ser)n
(s)396 4596 y Fi(There)25 b(are)h(three)f(basic)g(w)o(ays)f(to)h(b)n
(uild)f(a)h(shift-reduce)f(parser)-5 b(.)25 b(Full)g(LR\(1\))g(\(the)g
(`L)-9 b(')25 b(is)f(the)396 4726 y(direction)g(in)h(which)f(the)h
(input)f(is)g(scanned,)h(the)f(`R')i(is)e(the)h(w)o(ay)g(in)f(which)h
(the)f(parse)h(is)g(b)n(uilt,)396 4855 y(and)g(the)g(`1')g(is)f(the)h
(number)f(of)h(tok)o(ens)f(of)h(lookahead\))f(generates)h(a)h(parser)f
(with)f(man)o(y)g(states,)p Black 3784 5278 a Ff(39)p
Black eop
%%Page: 40 40
40 39 bop Black -2 67 a Ff(Chapter)24 b(6.)h(T)-5 b(ips)p
Black 396 579 a Fi(and)25 b(is)f(therefore)i(lar)n(ge)f(and)g(slo)n(w)
-6 b(.)23 b(SLR\(1\))j(\(simple)d(LR\(1\)\))j(is)e(a)i(cut-do)n(wn)d(v)
o(ersion)h(of)h(LR\(1\))396 708 y(which)g(generates)g(parsers)g(with)f
(roughly)g(one-tenth)g(as)h(man)o(y)f(states,)g(b)n(ut)g(lacks)h(the)f
(po)n(wer)h(to)396 838 y(parse)g(man)o(y)f(grammars)g(\(it)h(\002nds)g
(con\003icts)f(in)h(grammars)f(which)g(ha)n(v)o(e)h(none)f(under)h
(LR\(1\)\).)396 1017 y(LALR\(1\))g(\(look-ahead)g(LR\(1\)\),)h(the)e
(method)g(used)h(by)f(Happ)o(y)h(and)f(yacc,)i(is)e(tradeof)n(f)h
(between)396 1147 y(the)g(tw)o(o.)f(An)h(LALR\(1\))g(parser)g(has)g
(the)g(same)f(number)h(of)f(states)h(as)g(an)g(SLR\(1\))g(parser)l(,)h
(b)n(ut)e(it)396 1276 y(uses)h(a)g(more)g(comple)o(x)e(method)h(to)g
(calculate)h(the)g(lookahead)f(tok)o(ens)g(that)h(are)g(v)n(alid)f(at)h
(each)396 1406 y(point,)f(and)h(resolv)o(es)f(man)o(y)f(of)i(the)g
(con\003icts)f(that)h(SLR\(1\))h(\002nds.)e(Ho)n(we)n(v)o(er)l(,)g
(there)h(may)f(still)g(be)396 1535 y(con\003icts)h(in)f(an)h(LALR\(1\))
g(parser)h(that)e(w)o(ouldn')n(t)g(be)h(there)g(with)f(full)g(LR\(1\).)
p Black -2 5278 a Ff(40)p Black eop
%%Page: 41 41
41 40 bop Black Black Black Black eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
